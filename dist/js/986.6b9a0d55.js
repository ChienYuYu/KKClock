(self["webpackChunkkkclock"]=self["webpackChunkkkclock"]||[]).push([[986],{7045:function(e,t,r){var n=r(6339),a=r(3070);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),a.f(e,t,r)}},7066:function(e,t,r){"use strict";var n=r(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2087:function(e,t,r){var n=r(7854),a=r(9781),l=r(7045),i=r(7066),o=r(7293),s=n.RegExp,u=s.prototype,d=a&&o((function(){var e=!0;try{s(".","d")}catch(d){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",a=function(e,n){Object.defineProperty(t,e,{get:function(){return r+=n,!0}})},l={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var i in e&&(l.hasIndices="d"),l)a(i,l[i]);var o=Object.getOwnPropertyDescriptor(u,"flags").get.call(t);return o!==n||r!==n}));d&&l(u,"flags",{configurable:!0,get:i})},6986:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Pt}});var n=r(3396),a=r(7139),l=r(9242);const i={class:"container mt-5"},o={class:"col-12 col-md-10 mx-auto"},s={class:"table"},u=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"品名"),(0,n._)("th",{scope:"col"},"數量"),(0,n._)("th",{scope:"col"},"合計"),(0,n._)("th",{scope:"col"})])],-1),d={class:"d-flex col-10 col-md-6 col-lg-3"},c=["onClick"],v=(0,n._)("i",{class:"bi bi-plus"},null,-1),f=[v],p=["onUpdate:modelValue"],m=["onClick","disabled"],h=(0,n._)("i",{class:"bi bi-dash"},null,-1),y=[h],g=["onClick"],b=(0,n._)("i",{class:"bi bi-trash"},null,-1),V=[b],S=(0,n._)("tr",null,[(0,n._)("td",{class:"border-0",colspan:""})],-1),O={colspan:"4"},A={class:"col-md-8 col-lg-4"},U={class:"input-group mb-3"},F={colspan:"4"},k={class:"text-mygreen text-end px-5"},j={class:"text-myorange text-end px-5"},_={class:"text-myred text-end px-5"};function w(e,t,r,v,h,b){const w=(0,n.up)("LoadingPlugin"),E=(0,n.up)("BuyerInfo");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(w,{active:h.isLoading},null,8,["active"]),(0,n._)("div",i,[(0,n._)("div",o,[(0,n._)("table",s,[u,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.carts,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",null,(0,a.zw)(e.product.title),1),(0,n._)("td",null,[(0,n._)("div",d,[(0,n._)("button",{class:"btn btn-sm btn-secondary rounded-0",type:"button",onClick:t=>b.updateCart(e.id,e.qty+1)},f,8,c),(0,n.wy)((0,n._)("input",{type:"number",class:"form-control rounded-0 px-0 text-center bg-white",min:"1",id:"qty","onUpdate:modelValue":t=>e.qty=t,"aria-label":"qty",disabled:""},null,8,p),[[l.nr,e.qty]]),(0,n._)("button",{class:"btn btn-sm btn-secondary rounded-0",type:"button",onClick:t=>b.updateCart(e.id,e.qty-1),disabled:1===e.qty},y,8,m)])]),(0,n._)("td",null,"$"+(0,a.zw)(b.currency(e.total)),1),(0,n._)("td",null,[(0,n._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:t=>b.deleteCart(e.id)},V,8,g)])])))),128)),S,(0,n._)("tr",null,[(0,n._)("td",O,[(0,n._)("div",A,[(0,n._)("div",U,[(0,n._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[0]||(t[0]=(...e)=>b.useCouponCode&&b.useCouponCode(...e))}," 套用優惠碼 "),(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","aria-label":"coupon","aria-describedby":"button-coupon","onUpdate:modelValue":t[1]||(t[1]=e=>h.couponCode=e)},null,512),[[l.nr,h.couponCode]])])])])]),(0,n._)("tr",null,[(0,n._)("td",F,[(0,n._)("p",k,"合計 $"+(0,a.zw)(b.currency(h.totalPrice)),1),(0,n._)("p",j," 優惠券折扣 $"+(0,a.zw)(b.currency(Math.round(h.totalPrice-h.finalPrice))),1),(0,n._)("p",_," 總計 $"+(0,a.zw)(b.currency(Math.round(h.finalPrice))),1)])])])])]),(0,n.Wm)(E)])],64)}const E={class:"col-12 col-md-10 col-lg-6 mx-auto border p-4 my-5"},C=(0,n._)("h2",{class:"mb-3"},[(0,n.Uk)("請填寫訂購資料 "),(0,n._)("span",{class:"ms-3 h6 text-danger"},"*必填")],-1),x={class:"mb-3"},B={for:"email",name:"email",class:"form-label w-100"},I=(0,n.Uk)("Email* "),M={class:"mb-3"},P={for:"name",class:"form-label w-100"},T=(0,n.Uk)("收件人姓名* "),$={class:"mb-3"},q={for:"phone",class:"form-label w-100"},D=(0,n.Uk)("收件人電話* "),N={class:"mb-3"},R={for:"address",class:"form-label w-100"},Y=(0,n.Uk)("收件人地址* "),H={class:"mb-3"},L={for:"message",class:"form-label w-100"},W=(0,n.Uk)(" 留言 "),z=(0,n._)("button",{type:"submit",class:"btn btn-danger"},"送出訂單 & 付款去",-1);function Z(e,t,r,l,i,o){const s=(0,n.up)("Field"),u=(0,n.up)("ErrorMessage"),d=(0,n.up)("Form");return(0,n.wg)(),(0,n.iD)("div",E,[(0,n.Wm)(d,{onSubmit:o.createOrder},{default:(0,n.w5)((({errors:e})=>[C,(0,n._)("div",x,[(0,n._)("label",B,[I,(0,n.Wm)(s,{rules:o.validateEmail,class:(0,a.C_)([{"is-invalid":e["email"]},"form-control mt-2"]),type:"email",id:"email",name:"email","aria-describedby":"emailHelp",placeholder:"請輸入Email",modelValue:i.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.user.email=e)},null,8,["rules","class","modelValue"]),(0,n.Wm)(u,{name:"email",class:"text-danger"})])]),(0,n._)("div",M,[(0,n._)("label",P,[T,(0,n.Wm)(s,{rules:o.validateName,class:(0,a.C_)([{"is-invalid":e["name"]},"form-control mt-2"]),type:"text",name:"name",id:"name","aria-describedby":"emailHelp",placeholder:"請輸入收件人姓名",modelValue:i.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.user.name=e)},null,8,["rules","class","modelValue"]),(0,n.Wm)(u,{name:"name",class:"text-danger"})])]),(0,n._)("div",$,[(0,n._)("label",q,[D,(0,n.Wm)(s,{rules:o.validateTel,class:(0,a.C_)([{"is-invalid":e["phone"]},"form-control mt-2"]),type:"tel",id:"phone",name:"phone","aria-describedby":"emailHelp",placeholder:"請輸入手機ex 0912345678",modelValue:i.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.user.tel=e)},null,8,["rules","class","modelValue"]),(0,n.Wm)(u,{name:"phone",class:"text-danger"})])]),(0,n._)("div",N,[(0,n._)("label",R,[Y,(0,n.Wm)(s,{rules:o.validateAddress,class:(0,a.C_)([{"is-invalid":e["address"]},"form-control mt-2"]),type:"text",id:"address",name:"address","aria-describedby":"emailHelp",placeholder:"請輸入收件人地址",modelValue:i.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.user.address=e)},null,8,["rules","class","modelValue"]),(0,n.Wm)(u,{name:"address",class:"text-danger"})])]),(0,n._)("div",H,[(0,n._)("label",L,[W,(0,n.Wm)(s,{name:"message",id:"message",class:"form-control mt-2",modelValue:i.form.message,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.message=e)},null,8,["modelValue"])])]),z])),_:1},8,["onSubmit"])])}r(1703),r(6699),r(2087),r(2801);var J=r(4870);
/**
  * vee-validate v4.6.2
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */
function K(e){return"function"===typeof e}function X(e){return null===e||void 0===e}const G=e=>null!==e&&!!e&&"object"===typeof e&&!Array.isArray(e);function Q(e){return Number(e)>=0}function ee(e){const t=parseFloat(e);return isNaN(t)?e:t}const te={};function re(e){return te[e]}const ne=Symbol("vee-validate-form"),ae=Symbol("vee-validate-field-instance"),le=Symbol("Default empty value");function ie(e){return K(e)&&!!e.__locatorRef}function oe(e){return!!e&&K(e.validate)}function se(e){return"checkbox"===e||"radio"===e}function ue(e){return G(e)||Array.isArray(e)}function de(e){return Array.isArray(e)?0===e.length:G(e)&&0===Object.keys(e).length}function ce(e){return/^\[.+\]$/i.test(e)}function ve(e){return fe(e)&&e.multiple}function fe(e){return"SELECT"===e.tagName}function pe(e,t){const r=![!1,null,void 0,0].includes(t.multiple)&&!Number.isNaN(t.multiple);return"select"===e&&"multiple"in t&&r}function me(e,t){return!pe(e,t)&&"file"!==t.type&&!se(t.type)}function he(e){return ye(e)&&e.target&&"submit"in e.target}function ye(e){return!!e&&(!!("undefined"!==typeof Event&&K(Event)&&e instanceof Event)||!(!e||!e.srcElement))}function ge(e,t){return t in e&&e[t]!==le}function be(e){return ce(e)?e.replace(/\[|\]/gi,""):e}function Ve(e,t,r){if(!e)return r;if(ce(t))return e[be(t)];const n=(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce(((e,t)=>ue(e)&&t in e?e[t]:r),e);return n}function Se(e,t,r){if(ce(t))return void(e[be(t)]=r);const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let l=0;l<n.length;l++){if(l===n.length-1)return void(a[n[l]]=r);n[l]in a&&!X(a[n[l]])||(a[n[l]]=Q(n[l+1])?[]:{}),a=a[n[l]]}}function Oe(e,t){Array.isArray(e)&&Q(t)?e.splice(Number(t),1):G(e)&&delete e[t]}function Ae(e,t){if(ce(t))return void delete e[be(t)];const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let l=0;l<r.length;l++){if(l===r.length-1){Oe(n,r[l]);break}if(!(r[l]in n)||X(n[r[l]]))break;n=n[r[l]]}const a=r.map(((t,n)=>Ve(e,r.slice(0,n).join("."))));for(let l=a.length-1;l>=0;l--)de(a[l])&&(0!==l?Oe(a[l-1],r[l-1]):Oe(e,r[0]))}function Ue(e){return Object.keys(e)}function Fe(e,t){const r=(0,n.FN)();return(null===r||void 0===r?void 0:r.provides[e])||(0,n.f3)(e,t)}function ke(e){(0,n.ZK)(`[vee-validate]: ${e}`)}function je(e,t,r){if(Array.isArray(e)){const r=[...e],n=r.indexOf(t);return n>=0?r.splice(n,1):r.push(t),r}return e===t?r:t}function _e(e,t){let r,n;return function(...a){const l=this;return r||(r=!0,setTimeout((()=>r=!1),t),n=e.apply(l,a)),n}}function we(e,t=0){let r=null,n=[];return function(...a){return r&&window.clearTimeout(r),r=window.setTimeout((()=>{const t=e(...a);n.forEach((e=>e(t))),n=[]}),t),new Promise((e=>n.push(e)))}}function Ee(e,t){if(G(t))return t.number?ee(e):e}const Ce=(e,t,r)=>t.slots.default?"string"!==typeof e&&e?{default:()=>{var e,n;return null===(n=(e=t.slots).default)||void 0===n?void 0:n.call(e,r())}}:t.slots.default(r()):t.slots.default;function xe(e){if(Be(e))return e._value}function Be(e){return"_value"in e}function Ie(e){if(!ye(e))return e;const t=e.target;if(se(t.type)&&Be(t))return xe(t);if("file"===t.type&&t.files){const e=Array.from(t.files);return t.multiple?e:e[0]}if(ve(t))return Array.from(t.options).filter((e=>e.selected&&!e.disabled)).map(xe);if(fe(t)){const e=Array.from(t.options).find((e=>e.selected));return e?xe(e):t.value}return t.value}function Me(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?G(e)&&e._$$isNormalized?e:G(e)?Object.keys(e).reduce(((t,r)=>{const n=Pe(e[r]);return!1!==e[r]&&(t[r]=Te(n)),t}),t):"string"!==typeof e?t:e.split("|").reduce(((e,t)=>{const r=$e(t);return r.name?(e[r.name]=Te(r.params),e):e}),t):t}function Pe(e){return!0===e?[]:Array.isArray(e)||G(e)?e:[e]}function Te(e){const t=e=>"string"===typeof e&&"@"===e[0]?qe(e.slice(1)):e;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce(((r,n)=>(r[n]=t(e[n]),r)),{})}const $e=e=>{let t=[];const r=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:r,params:t}};function qe(e){const t=t=>{const r=Ve(t,e)||t[e];return r};return t.__locatorRef=e,t}function De(e){return Array.isArray(e)?e.filter(ie):Ue(e).filter((t=>ie(e[t]))).map((t=>e[t]))}const Ne={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Re=Object.assign({},Ne);const Ye=()=>Re;async function He(e,t,r={}){const n=null===r||void 0===r?void 0:r.bails,a={name:(null===r||void 0===r?void 0:r.name)||"{field}",rules:t,bails:null===n||void 0===n||n,formData:(null===r||void 0===r?void 0:r.values)||{}},l=await Le(a,e),i=l.errors;return{errors:i,valid:!i.length}}async function Le(e,t){if(oe(e.rules))return We(t,e.rules,{bails:e.bails});if(K(e.rules)||Array.isArray(e.rules)){const r={field:e.name,form:e.formData,value:t},n=Array.isArray(e.rules)?e.rules:[e.rules],a=n.length,l=[];for(let i=0;i<a;i++){const a=n[i],o=await a(t,r),s="string"!==typeof o&&o;if(s)continue;const u="string"===typeof o?o:Ze(r);if(l.push(u),e.bails)return{errors:l}}return{errors:l}}const r=Object.assign(Object.assign({},e),{rules:Me(e.rules)}),n=[],a=Object.keys(r.rules),l=a.length;for(let i=0;i<l;i++){const l=a[i],o=await ze(r,t,{name:l,params:r.rules[l]});if(o.error&&(n.push(o.error),e.bails))return{errors:n}}return{errors:n}}async function We(e,t,r){var n;const a=await t.validate(e,{abortEarly:null===(n=r.bails)||void 0===n||n}).then((()=>[])).catch((e=>{if("ValidationError"===e.name)return e.errors;throw e}));return{errors:a}}async function ze(e,t,r){const n=re(r.name);if(!n)throw new Error(`No such validator '${r.name}' exists.`);const a=Je(r.params,e.formData),l={field:e.name,value:t,form:e.formData,rule:Object.assign(Object.assign({},r),{params:a})},i=await n(t,a,l);return"string"===typeof i?{error:i}:{error:i?void 0:Ze(l)}}function Ze(e){const t=Ye().generateMessage;return t?t(e):"Field is invalid"}function Je(e,t){const r=e=>ie(e)?e(t):e;return Array.isArray(e)?e.map(r):Object.keys(e).reduce(((t,n)=>(t[n]=r(e[n]),t)),{})}async function Ke(e,t){const r=await e.validate(t,{abortEarly:!1}).then((()=>[])).catch((e=>{if("ValidationError"!==e.name)throw e;return e.inner||[]})),n={},a={};for(const l of r){const e=l.errors;n[l.path]={valid:!e.length,errors:e},e.length&&(a[l.path]=e[0])}return{valid:!r.length,results:n,errors:a}}async function Xe(e,t,r){const n=Ue(e),a=n.map((async n=>{var a,l,i;const o=await He(Ve(t,n),e[n],{name:(null===(a=null===r||void 0===r?void 0:r.names)||void 0===a?void 0:a[n])||n,values:t,bails:null===(i=null===(l=null===r||void 0===r?void 0:r.bailsMap)||void 0===l?void 0:l[n])||void 0===i||i});return Object.assign(Object.assign({},o),{path:n})}));let l=!0;const i=await Promise.all(a),o={},s={};for(const u of i)o[u.path]={valid:u.valid,errors:u.errors},u.valid||(l=!1,s[u.path]=u.errors[0]);return{valid:l,results:o,errors:s}}function Ge(e,t,r){"object"===typeof r.value&&(r.value=Qe(r.value)),r.enumerable&&!r.get&&!r.set&&r.configurable&&r.writable&&"__proto__"!==t?e[t]=r.value:Object.defineProperty(e,t,r)}function Qe(e){if("object"!==typeof e)return e;var t,r,n,a=0,l=Object.prototype.toString.call(e);if("[object Object]"===l?n=Object.create(e.__proto__||null):"[object Array]"===l?n=Array(e.length):"[object Set]"===l?(n=new Set,e.forEach((function(e){n.add(Qe(e))}))):"[object Map]"===l?(n=new Map,e.forEach((function(e,t){n.set(Qe(t),Qe(e))}))):"[object Date]"===l?n=new Date(+e):"[object RegExp]"===l?n=new RegExp(e.source,e.flags):"[object DataView]"===l?n=new e.constructor(Qe(e.buffer)):"[object ArrayBuffer]"===l?n=e.slice(0):"Array]"===l.slice(-6)&&(n=new e.constructor(e)),n){for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)Ge(n,r[a],Object.getOwnPropertyDescriptor(e,r[a]));for(a=0,r=Object.getOwnPropertyNames(e);a<r.length;a++)Object.hasOwnProperty.call(n,t=r[a])&&n[t]===e[t]||Ge(n,t,Object.getOwnPropertyDescriptor(e,t))}return n||e}var et=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,a,l;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;0!==a--;)if(!e(t[a],r[a]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(a of t.entries())if(!r.has(a[0]))return!1;for(a of t.entries())if(!e(a[1],r.get(a[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(a of t.entries())if(!r.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if(n=t.length,n!=r.length)return!1;for(a=n;0!==a--;)if(t[a]!==r[a])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(l=Object.keys(t),n=l.length,n!==Object.keys(r).length)return!1;for(a=n;0!==a--;)if(!Object.prototype.hasOwnProperty.call(r,l[a]))return!1;for(a=n;0!==a--;){var i=l[a];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r};let tt=0;function rt(e,t){const{value:r,initialValue:n,setInitialValue:a}=nt(e,t.modelValue,!t.standalone),{errorMessage:l,errors:i,setErrors:o}=lt(e,!t.standalone),s=at(r,n,i),u=tt>=Number.MAX_SAFE_INTEGER?0:++tt;function d(e){var t;"value"in e&&(r.value=e.value),"errors"in e&&o(e.errors),"touched"in e&&(s.touched=null!==(t=e.touched)&&void 0!==t?t:s.touched),"initialValue"in e&&a(e.initialValue)}return{id:u,path:e,value:r,initialValue:n,meta:s,errors:i,errorMessage:l,setState:d}}function nt(e,t,r=!0){const a=!0===r?Fe(ne,void 0):void 0,l=(0,J.iH)((0,J.SU)(t));function i(){return a?Ve(a.meta.value.initialValues,(0,J.SU)(e),(0,J.SU)(l)):(0,J.SU)(l)}function o(t){a?a.setFieldInitialValue((0,J.SU)(e),t):l.value=t}const s=(0,n.Fl)(i);if(!a){const e=(0,J.iH)(i());return{value:e,initialValue:s,setInitialValue:o}}const u=t?(0,J.SU)(t):Ve(a.values,(0,J.SU)(e),(0,J.SU)(s));a.stageInitialValue((0,J.SU)(e),u,!0);const d=(0,n.Fl)({get(){return Ve(a.values,(0,J.SU)(e))},set(t){a.setFieldValue((0,J.SU)(e),t)}});return{value:d,initialValue:s,setInitialValue:o}}function at(e,t,r){const a=(0,J.qj)({touched:!1,pending:!1,valid:!0,validated:!!(0,J.SU)(r).length,initialValue:(0,n.Fl)((()=>(0,J.SU)(t))),dirty:(0,n.Fl)((()=>!et((0,J.SU)(e),(0,J.SU)(t))))});return(0,n.YP)(r,(e=>{a.valid=!e.length}),{immediate:!0,flush:"sync"}),a}function lt(e,t){const r=t?Fe(ne,void 0):void 0;function a(e){return e?Array.isArray(e)?e:[e]:[]}if(!r){const e=(0,J.iH)([]);return{errors:e,errorMessage:(0,n.Fl)((()=>e.value[0])),setErrors:t=>{e.value=a(t)}}}const l=(0,n.Fl)((()=>r.errorBag.value[(0,J.SU)(e)]||[]));return{errors:l,errorMessage:(0,n.Fl)((()=>l.value[0])),setErrors:t=>{r.setFieldErrorBag((0,J.SU)(e),a(t))}}}let it;_e((()=>{setTimeout((async()=>{await(0,n.Y3)(),null===it||void 0===it||it.sendInspectorState(ot),null===it||void 0===it||it.sendInspectorTree(ot)}),100)}),100);const ot="vee-validate-inspector";function st(e,t,r){return se(null===r||void 0===r?void 0:r.type)?vt(e,t,r):ut(e,t,r)}function ut(e,t,r){const{initialValue:a,validateOnMount:l,bails:i,type:o,checkedValue:s,label:u,validateOnValueUpdate:d,uncheckedValue:c,standalone:v,keepValueOnUnmount:f,modelPropName:p,syncVModel:m}=dt((0,J.SU)(e),r),h=v?void 0:Fe(ne);let y=!1;const{id:g,value:b,initialValue:V,meta:S,setState:O,errors:A,errorMessage:U}=rt(e,{modelValue:a,standalone:v});m&&ft({value:b,prop:p,handleChange:C});const F=()=>{S.touched=!0},k=(0,n.Fl)((()=>{let r=(0,J.SU)(t);const n=(0,J.SU)(null===h||void 0===h?void 0:h.schema);return n&&!oe(n)&&(r=ct(n,(0,J.SU)(e))||r),oe(r)||K(r)||Array.isArray(r)?r:Me(r)}));async function j(t){var r,n;return(null===h||void 0===h?void 0:h.validateSchema)?null!==(r=(await h.validateSchema(t)).results[(0,J.SU)(e)])&&void 0!==r?r:{valid:!0,errors:[]}:He(b.value,k.value,{name:(0,J.SU)(u)||(0,J.SU)(e),values:null!==(n=null===h||void 0===h?void 0:h.values)&&void 0!==n?n:{},bails:i})}async function _(){S.pending=!0,S.validated=!0;const e=await j("validated-only");return y&&(e.valid=!0,e.errors=[]),O({errors:e.errors}),S.pending=!1,e}async function w(){const e=await j("silent");return y&&(e.valid=!0),S.valid=e.valid,e}function E(e){return(null===e||void 0===e?void 0:e.mode)&&"force"!==(null===e||void 0===e?void 0:e.mode)?"validated-only"===(null===e||void 0===e?void 0:e.mode)?_():w():_()}function C(e,t=!0){const r=Ie(e);b.value=r,!d&&t&&_()}function x(e){S.touched=e}let B;function I(){B=(0,n.YP)(b,((e,t)=>{if(et(e,t))return;const r=d?_:w;r()}),{deep:!0})}function M(e){var t;null===B||void 0===B||B();const r=e&&"value"in e?e.value:V.value;O({value:Qe(r),initialValue:Qe(r),touched:null!==(t=null===e||void 0===e?void 0:e.touched)&&void 0!==t&&t,errors:(null===e||void 0===e?void 0:e.errors)||[]}),S.pending=!1,S.validated=!1,w(),(0,n.Y3)((()=>{I()}))}function P(e){b.value=e}function T(e){O({errors:Array.isArray(e)?e:[e]})}(0,n.bv)((()=>{if(l)return _();h&&h.validateSchema||w()})),I();const $={id:g,name:e,label:u,value:b,meta:S,errors:A,errorMessage:U,type:o,checkedValue:s,uncheckedValue:c,bails:i,keepValueOnUnmount:f,resetField:M,handleReset:()=>M(),validate:E,handleChange:C,handleBlur:F,setState:O,setTouched:x,setErrors:T,setValue:P};if((0,n.JJ)(ae,$),(0,J.dq)(t)&&"function"!==typeof(0,J.SU)(t)&&(0,n.YP)(t,((e,t)=>{et(e,t)||(S.validated?_():w())}),{deep:!0}),!h)return $;h.register($),(0,n.Jd)((()=>{y=!0,h.unregister($)}));const q=(0,n.Fl)((()=>{const e=k.value;return!e||K(e)||oe(e)||Array.isArray(e)?{}:Object.keys(e).reduce(((t,r)=>{const n=De(e[r]).map((e=>e.__locatorRef)).reduce(((e,t)=>{const r=Ve(h.values,t)||h.values[t];return void 0!==r&&(e[t]=r),e}),{});return Object.assign(t,n),t}),{})}));return(0,n.YP)(q,((e,t)=>{if(!Object.keys(e).length)return;const r=!et(e,t);r&&(S.validated?_():w())})),$}function dt(e,t){const r=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0});if(!t)return r();const n="valueProp"in t?t.valueProp:t.checkedValue;return Object.assign(Object.assign(Object.assign({},r()),t||{}),{checkedValue:n})}function ct(e,t){if(e)return e[t]}function vt(e,t,r){const a=(null===r||void 0===r?void 0:r.standalone)?void 0:Fe(ne),l=null===r||void 0===r?void 0:r.checkedValue,i=null===r||void 0===r?void 0:r.uncheckedValue;function o(e){const t=e.handleChange,r=(0,n.Fl)((()=>{const t=(0,J.SU)(e.value),r=(0,J.SU)(l);return Array.isArray(t)?t.includes(r):r===t}));function o(n,o=!0){var s;if(r.value===(null===(s=null===n||void 0===n?void 0:n.target)||void 0===s?void 0:s.checked))return;let u=Ie(n);a||(u=je((0,J.SU)(e.value),(0,J.SU)(l),(0,J.SU)(i))),t(u,o)}return Object.assign(Object.assign({},e),{checked:r,checkedValue:l,uncheckedValue:i,handleChange:o})}return o(ut(e,t,r))}function ft({prop:e,value:t,handleChange:r}){const a=(0,n.FN)();if(!a)return void 0;const l=e||"modelValue",i=`update:${l}`;l in a.props&&((0,n.YP)(t,(e=>{et(e,pt(a,l))||a.emit(i,e)})),(0,n.YP)((()=>pt(a,l)),(e=>{if(e===le&&void 0===t.value)return;const n=e===le?void 0:e;et(n,Ee(t.value,a.props.modelModifiers))||r(n)})))}function pt(e,t){return e.props[t]}const mt=(0,n.aZ)({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Ye().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:le},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,t){const r=(0,J.Vh)(e,"rules"),a=(0,J.Vh)(e,"name"),l=(0,J.Vh)(e,"label"),i=(0,J.Vh)(e,"uncheckedValue"),o=(0,J.Vh)(e,"keepValue"),{errors:s,value:u,errorMessage:d,validate:c,handleChange:v,handleBlur:f,setTouched:p,resetField:m,handleReset:h,meta:y,checked:g,setErrors:b}=st(a,r,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:t.attrs.type,initialValue:gt(e,t),checkedValue:t.attrs.value,uncheckedValue:i,label:l,validateOnValueUpdate:!1,keepValueOnUnmount:o}),V=function(e,r=!0){v(e,r),t.emit("update:modelValue",u.value)},S=e=>{se(t.attrs.type)||(u.value=Ie(e))},O=function(e){S(e),t.emit("update:modelValue",u.value)},A=(0,n.Fl)((()=>{const{validateOnInput:r,validateOnChange:n,validateOnBlur:a,validateOnModelUpdate:l}=yt(e),i=[f,t.attrs.onBlur,a?c:void 0].filter(Boolean),o=[e=>V(e,r),t.attrs.onInput].filter(Boolean),s=[e=>V(e,n),t.attrs.onChange].filter(Boolean),d={name:e.name,onBlur:i,onInput:o,onChange:s,"onUpdate:modelValue":e=>V(e,l)};se(t.attrs.type)&&g&&(d.checked=g.value);const v=ht(e,t);return me(v,t.attrs)&&(d.value=u.value),d}));function U(){return{field:A.value,value:u.value,meta:y,errors:s.value,errorMessage:d.value,validate:c,resetField:m,handleChange:V,handleInput:O,handleReset:h,handleBlur:f,setTouched:p,setErrors:b}}return t.expose({setErrors:b,setTouched:p,reset:m,validate:c,handleChange:v}),()=>{const r=(0,n.LL)(ht(e,t)),a=Ce(r,t,U);return r?(0,n.h)(r,Object.assign(Object.assign({},t.attrs),A.value),a):a}}});function ht(e,t){let r=e.as||"";return e.as||t.slots.default||(r="input"),r}function yt(e){var t,r,n,a;const{validateOnInput:l,validateOnChange:i,validateOnBlur:o,validateOnModelUpdate:s}=Ye();return{validateOnInput:null!==(t=e.validateOnInput)&&void 0!==t?t:l,validateOnChange:null!==(r=e.validateOnChange)&&void 0!==r?r:i,validateOnBlur:null!==(n=e.validateOnBlur)&&void 0!==n?n:o,validateOnModelUpdate:null!==(a=e.validateOnModelUpdate)&&void 0!==a?a:s}}function gt(e,t){return se(t.attrs.type)?ge(e,"modelValue")?e.modelValue:void 0:ge(e,"modelValue")?e.modelValue:t.attrs.value}const bt=mt;let Vt=0;function St(e){var t;const r=Vt++;let a=!1;const l=(0,J.iH)({}),i=(0,J.iH)(!1),o=(0,J.iH)(0),s=[],u=(0,J.qj)(Qe((0,J.SU)(null===e||void 0===e?void 0:e.initialValues)||{})),{errorBag:d,setErrorBag:c,setFieldErrorBag:v}=Ut(null===e||void 0===e?void 0:e.initialErrors),f=(0,n.Fl)((()=>Ue(d.value).reduce(((e,t)=>{const r=d.value[t];return r&&r.length&&(e[t]=r[0]),e}),{})));function p(e){const t=l.value[e];return Array.isArray(t)?t[0]:t}function m(e){return!!l.value[e]}const h=(0,n.Fl)((()=>Ue(l.value).reduce(((e,t)=>{const r=p(t);return r&&(e[t]=(0,J.SU)(r.label||r.name)||""),e}),{}))),y=(0,n.Fl)((()=>Ue(l.value).reduce(((e,t)=>{var r;const n=p(t);return n&&(e[t]=null===(r=n.bails)||void 0===r||r),e}),{}))),g=Object.assign({},(null===e||void 0===e?void 0:e.initialErrors)||{}),b=null!==(t=null===e||void 0===e?void 0:e.keepValuesOnUnmount)&&void 0!==t&&t,{initialValues:V,originalInitialValues:S,setInitialValues:O}=At(l,u,null===e||void 0===e?void 0:e.initialValues),A=Ot(l,u,S,f),U=null===e||void 0===e?void 0:e.validationSchema,F={formId:r,fieldsByPath:l,values:u,errorBag:d,errors:f,schema:U,submitCount:o,meta:A,isSubmitting:i,fieldArrays:s,keepValuesOnUnmount:b,validateSchema:(0,J.SU)(U)?G:void 0,validate:R,register:D,unregister:N,setFieldErrorBag:v,validateField:Y,setFieldValue:C,setValues:x,setErrors:E,setFieldError:w,setFieldTouched:M,setTouched:P,resetForm:T,handleSubmit:H,stageInitialValue:z,unsetInitialValue:W,setFieldInitialValue:L,useFieldModel:I};function k(e){return Array.isArray(e)}function j(e,t){return Array.isArray(e)?e.forEach(t):t(e)}function _(e){Object.values(l.value).forEach((t=>{t&&j(t,e)}))}function w(e,t){v(e,t)}function E(e){c(e)}function C(e,t,{force:r}={force:!1}){var n;const i=l.value[e],o=Qe(t);if(!i)return void Se(u,e,o);if(k(i)&&"checkbox"===(null===(n=i[0])||void 0===n?void 0:n.type)&&!Array.isArray(t)){const r=Qe(je(Ve(u,e)||[],t,void 0));return void Se(u,e,r)}let s=t;k(i)||"checkbox"!==i.type||r||a||(s=Qe(je(Ve(u,e),t,(0,J.SU)(i.uncheckedValue)))),Se(u,e,s)}function x(e){Ue(u).forEach((e=>{delete u[e]})),Ue(e).forEach((t=>{C(t,e[t])})),s.forEach((e=>e&&e.reset()))}function B(e){const{value:t}=nt(e);return(0,n.YP)(t,(()=>{m((0,J.SU)(e))||R({mode:"validated-only"})})),t}function I(e){return Array.isArray(e)?e.map(B):B(e)}function M(e,t){const r=l.value[e];r&&j(r,(e=>e.setTouched(t)))}function P(e){Ue(e).forEach((t=>{M(t,!!e[t])}))}function T(e){a=!0,(null===e||void 0===e?void 0:e.values)?(O(e.values),x(null===e||void 0===e?void 0:e.values)):(O(S.value),x(S.value)),_((e=>e.resetField())),(null===e||void 0===e?void 0:e.touched)&&P(e.touched),E((null===e||void 0===e?void 0:e.errors)||{}),o.value=(null===e||void 0===e?void 0:e.submitCount)||0,(0,n.Y3)((()=>{a=!1}))}function $(e,t){const r=(0,J.Xl)(e),n=t;if(!l.value[n])return void(l.value[n]=r);const a=l.value[n];a&&!Array.isArray(a)&&(l.value[n]=[a]),l.value[n]=[...l.value[n],r]}function q(e,t){const r=t,n=l.value[r];if(n)if(k(n)||e.id!==n.id){if(k(n)){const t=n.findIndex((t=>t.id===e.id));if(-1===t)return;n.splice(t,1),n.length||delete l.value[r]}}else delete l.value[r]}function D(e){const t=(0,J.SU)(e.name);$(e,t),(0,J.dq)(e.name)&&(0,n.YP)(e.name,(async(t,r)=>{await(0,n.Y3)(),q(e,r),$(e,t),(f.value[r]||f.value[t])&&(w(r,void 0),Y(t)),await(0,n.Y3)(),m(r)||Ae(u,r)}));const r=(0,J.SU)(e.errorMessage);r&&(null===g||void 0===g?void 0:g[t])!==r&&Y(t),delete g[t]}function N(e){const t=(0,J.SU)(e.name),r=l.value[t],a=!!r&&k(r);q(e,t),(0,n.Y3)((()=>{var n;const i=null!==(n=(0,J.SU)(e.keepValueOnUnmount))&&void 0!==n?n:(0,J.SU)(b),o=Ve(u,t),s=a&&(r===l.value[t]||!l.value[t]);if(s&&Array.isArray(o)&&!i){const r=o.findIndex((t=>et(t,(0,J.SU)(e.checkedValue))));if(r>-1){const e=[...o];e.splice(r,1),C(t,e,{force:!0})}}if(!m(t)){if(w(t,void 0),i)return;if(a&&!de(Ve(u,t)))return;Ae(u,t)}}))}async function R(e){if(_((e=>e.meta.validated=!0)),F.validateSchema)return F.validateSchema((null===e||void 0===e?void 0:e.mode)||"force");const t=await Promise.all(Object.values(l.value).map((t=>{const r=Array.isArray(t)?t[0]:t;return r?r.validate(e).then((e=>({key:(0,J.SU)(r.name),valid:e.valid,errors:e.errors}))):Promise.resolve({key:"",valid:!0,errors:[]})}))),r={},n={};for(const a of t)r[a.key]={valid:a.valid,errors:a.errors},a.errors.length&&(n[a.key]=a.errors[0]);return{valid:t.every((e=>e.valid)),results:r,errors:n}}async function Y(e){const t=l.value[e];return t?Array.isArray(t)?t.map((e=>e.validate()))[0]:t.validate():((0,n.ZK)(`field with name ${e} was not found`),Promise.resolve({errors:[],valid:!0}))}function H(e,t){return function(r){return r instanceof Event&&(r.preventDefault(),r.stopPropagation()),P(Ue(l.value).reduce(((e,t)=>(e[t]=!0,e)),{})),i.value=!0,o.value++,R().then((n=>{if(n.valid&&"function"===typeof e)return e(Qe(u),{evt:r,setErrors:E,setFieldError:w,setTouched:P,setFieldTouched:M,setValues:x,setFieldValue:C,resetForm:T});n.valid||"function"!==typeof t||t({values:Qe(u),evt:r,errors:n.errors,results:n.results})})).then((e=>(i.value=!1,e)),(e=>{throw i.value=!1,e}))}}function L(e,t){Se(V.value,e,Qe(t))}function W(e){Ae(V.value,e)}function z(e,t,r=!1){Se(u,e,t),L(e,t),r&&Se(S.value,e,Qe(t))}async function Z(){const e=(0,J.SU)(U);if(!e)return{valid:!0,results:{},errors:{}};const t=oe(e)?await Ke(e,u):await Xe(e,u,{names:h.value,bailsMap:y.value});return t}const K=we(Z,5),X=we(Z,5);async function G(e){const t=await("silent"===e?K():X()),r=F.fieldsByPath.value||{},n=Ue(F.errorBag.value),a=[...new Set([...Ue(t.results),...Ue(r),...n])];return a.reduce(((n,a)=>{const l=r[a],i=(t.results[a]||{errors:[]}).errors,o={errors:i,valid:!i.length};if(n.results[a]=o,o.valid||(n.errors[a]=o.errors[0]),!l)return w(a,i),n;if(j(l,(e=>e.meta.valid=o.valid)),"silent"===e)return n;const s=Array.isArray(l)?l.some((e=>e.meta.validated)):l.meta.validated;return"validated-only"!==e||s?(j(l,(e=>e.setState({errors:o.errors}))),n):n}),{valid:t.valid,results:{},errors:{}})}const Q=H(((e,{evt:t})=>{he(t)&&t.target.submit()}));return(0,n.bv)((()=>{(null===e||void 0===e?void 0:e.initialErrors)&&E(e.initialErrors),(null===e||void 0===e?void 0:e.initialTouched)&&P(e.initialTouched),(null===e||void 0===e?void 0:e.validateOnMount)?R():F.validateSchema&&F.validateSchema("silent")})),(0,J.dq)(U)&&(0,n.YP)(U,(()=>{var e;null===(e=F.validateSchema)||void 0===e||e.call(F,"validated-only")})),(0,n.JJ)(ne,F),{errors:f,meta:A,values:u,isSubmitting:i,submitCount:o,validate:R,validateField:Y,handleReset:()=>T(),resetForm:T,handleSubmit:H,submitForm:Q,setFieldError:w,setErrors:E,setFieldValue:C,setValues:x,setFieldTouched:M,setTouched:P,useFieldModel:I}}function Ot(e,t,r,a){const l={touched:"some",pending:"some",valid:"every"},i=(0,n.Fl)((()=>!et(t,(0,J.SU)(r))));function o(){const t=Object.values(e.value).flat(1).filter(Boolean);return Ue(l).reduce(((e,r)=>{const n=l[r];return e[r]=t[n]((e=>e.meta[r])),e}),{})}const s=(0,J.qj)(o());return(0,n.m0)((()=>{const e=o();s.touched=e.touched,s.valid=e.valid,s.pending=e.pending})),(0,n.Fl)((()=>Object.assign(Object.assign({initialValues:(0,J.SU)(r)},s),{valid:s.valid&&!Ue(a.value).length,dirty:i.value})))}function At(e,t,r){const a=(0,J.iH)(Qe((0,J.SU)(r))||{}),l=(0,J.iH)(Qe((0,J.SU)(r))||{});function i(r,n=!1){a.value=Qe(r),l.value=Qe(r),n&&Ue(e.value).forEach((r=>{const n=e.value[r],l=Array.isArray(n)?n.some((e=>e.meta.touched)):null===n||void 0===n?void 0:n.meta.touched;if(!n||l)return;const i=Ve(a.value,r);Se(t,r,Qe(i))}))}return(0,J.dq)(r)&&(0,n.YP)(r,(e=>{i(e,!0)}),{deep:!0}),{initialValues:a,originalInitialValues:l,setInitialValues:i}}function Ut(e){const t=(0,J.iH)({});function r(e){return Array.isArray(e)?e:e?[e]:[]}function n(e,n){n?t.value[e]=r(n):delete t.value[e]}function a(e){t.value=Ue(e).reduce(((t,n)=>{const a=e[n];return a&&(t[n]=r(a)),t}),{})}return e&&a(e),{errorBag:t,setErrorBag:a,setFieldErrorBag:n}}const Ft=(0,n.aZ)({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,t){const r=(0,J.Vh)(e,"initialValues"),a=(0,J.Vh)(e,"validationSchema"),l=(0,J.Vh)(e,"keepValues"),{errors:i,values:o,meta:s,isSubmitting:u,submitCount:d,validate:c,validateField:v,handleReset:f,resetForm:p,handleSubmit:m,setErrors:h,setFieldError:y,setFieldValue:g,setValues:b,setFieldTouched:V,setTouched:S}=St({validationSchema:a.value?a:void 0,initialValues:r,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:l}),O=m(((e,{evt:t})=>{he(t)&&t.target.submit()}),e.onInvalidSubmit),A=e.onSubmit?m(e.onSubmit,e.onInvalidSubmit):O;function U(e){ye(e)&&e.preventDefault(),f(),"function"===typeof t.attrs.onReset&&t.attrs.onReset()}function F(t,r){const n="function"!==typeof t||r?r:t;return m(n,e.onInvalidSubmit)(t)}function k(){return{meta:s.value,errors:i.value,values:o,isSubmitting:u.value,submitCount:d.value,validate:c,validateField:v,handleSubmit:F,handleReset:f,submitForm:O,setErrors:h,setFieldError:y,setFieldValue:g,setValues:b,setFieldTouched:V,setTouched:S,resetForm:p}}return t.expose({setFieldError:y,setErrors:h,setFieldValue:g,setValues:b,setFieldTouched:V,setTouched:S,resetForm:p,validate:c,validateField:v}),function(){const r="form"===e.as?e.as:(0,n.LL)(e.as),a=Ce(r,t,k);if(!e.as)return a;const l="form"===e.as?{novalidate:!0}:{};return(0,n.h)(r,Object.assign(Object.assign(Object.assign({},l),t.attrs),{onSubmit:A,onReset:U}),a)}}}),kt=Ft;function jt(e){const t=Fe(ne,void 0),r=(0,J.iH)([]),a=()=>{},l={fields:r,remove:a,push:a,swap:a,insert:a,update:a,replace:a,prepend:a,move:a};if(!t)return ke("FieldArray requires being a child of `<Form/>` or `useForm` being called before it. Array fields may not work correctly"),l;if(!(0,J.SU)(e))return ke("FieldArray requires a field path to be provided, did you forget to pass the `name` prop?"),l;const i=t.fieldArrays.find((t=>(0,J.SU)(t.path)===(0,J.SU)(e)));if(i)return i;let o=0;function s(){const n=Ve(null===t||void 0===t?void 0:t.values,(0,J.SU)(e),[])||[];r.value=n.map(d),u()}function u(){const e=r.value.length;for(let t=0;t<e;t++){const n=r.value[t];n.isFirst=0===t,n.isLast=t===e-1}}function d(a){const l=o++,i={key:l,value:(0,n.Fl)({get(){const n=Ve(null===t||void 0===t?void 0:t.values,(0,J.SU)(e),[])||[],i=r.value.findIndex((e=>e.key===l));return-1===i?a:n[i]},set(e){const t=r.value.findIndex((e=>e.key===l));-1!==t?h(t,e):ke("Attempting to update a non-existent array item")}}),isFirst:!1,isLast:!1};return i}function c(n){const a=(0,J.SU)(e),l=Ve(null===t||void 0===t?void 0:t.values,a);if(!l||!Array.isArray(l))return;const i=[...l];i.splice(n,1),null===t||void 0===t||t.unsetInitialValue(a+`[${n}]`),null===t||void 0===t||t.setFieldValue(a,i),r.value.splice(n,1),u()}function v(n){const a=(0,J.SU)(e),l=Ve(null===t||void 0===t?void 0:t.values,a),i=X(l)?[]:l;if(!Array.isArray(i))return;const o=[...i];o.push(n),null===t||void 0===t||t.stageInitialValue(a+`[${o.length-1}]`,n),null===t||void 0===t||t.setFieldValue(a,o),r.value.push(d(n)),u()}function f(n,a){const l=(0,J.SU)(e),i=Ve(null===t||void 0===t?void 0:t.values,l);if(!Array.isArray(i)||!(n in i)||!(a in i))return;const o=[...i],s=[...r.value],d=o[n];o[n]=o[a],o[a]=d;const c=s[n];s[n]=s[a],s[a]=c,null===t||void 0===t||t.setFieldValue(l,o),r.value=s,u()}function p(n,a){const l=(0,J.SU)(e),i=Ve(null===t||void 0===t?void 0:t.values,l);if(!Array.isArray(i)||i.length<n)return;const o=[...i],s=[...r.value];o.splice(n,0,a),s.splice(n,0,d(a)),null===t||void 0===t||t.setFieldValue(l,o),r.value=s,u()}function m(r){const n=(0,J.SU)(e);null===t||void 0===t||t.setFieldValue(n,r),s()}function h(r,n){const a=(0,J.SU)(e),l=Ve(null===t||void 0===t?void 0:t.values,a);!Array.isArray(l)||l.length-1<r||null===t||void 0===t||t.setFieldValue(`${a}[${r}]`,n)}function y(n){const a=(0,J.SU)(e),l=Ve(null===t||void 0===t?void 0:t.values,a),i=X(l)?[]:l;if(!Array.isArray(i))return;const o=[n,...i];null===t||void 0===t||t.stageInitialValue(a+`[${o.length-1}]`,n),null===t||void 0===t||t.setFieldValue(a,o),r.value.unshift(d(n)),u()}function g(n,a){const l=(0,J.SU)(e),i=Ve(null===t||void 0===t?void 0:t.values,l),o=X(i)?[]:[...i];if(!Array.isArray(i)||!(n in i)||!(a in i))return;const s=[...r.value],d=s[n];s.splice(n,1),s.splice(a,0,d);const c=o[n];o.splice(n,1),o.splice(a,0,c),null===t||void 0===t||t.setFieldValue(l,o),r.value=s,u()}s();const b={fields:r,remove:c,push:v,swap:f,insert:p,update:h,replace:m,prepend:y,move:g};return t.fieldArrays.push(Object.assign({path:e,reset:s},b)),(0,n.Jd)((()=>{const r=t.fieldArrays.findIndex((t=>(0,J.SU)(t.path)===(0,J.SU)(e)));r>=0&&t.fieldArrays.splice(r,1)})),b}(0,n.aZ)({name:"FieldArray",inheritAttrs:!1,props:{name:{type:String,required:!0}},setup(e,t){const{push:r,remove:n,swap:a,insert:l,replace:i,update:o,prepend:s,move:u,fields:d}=jt((0,J.Vh)(e,"name"));function c(){return{fields:d.value,push:r,remove:n,swap:a,insert:l,update:o,replace:i,prepend:s,move:u}}return t.expose({push:r,remove:n,swap:a,insert:l,update:o,replace:i,prepend:s,move:u}),()=>{const e=Ce(void 0,t,c);return e}}});const _t=(0,n.aZ)({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,t){const r=(0,n.f3)(ne,void 0),a=(0,n.Fl)((()=>null===r||void 0===r?void 0:r.errors.value[e.name]));function l(){return{message:a.value}}return()=>{if(!a.value)return;const r=e.as?(0,n.LL)(e.as):e.as,i=Ce(r,t,l),o=Object.assign({role:"alert"},t.attrs);return r||!Array.isArray(i)&&i||!(null===i||void 0===i?void 0:i.length)?!Array.isArray(i)&&i||(null===i||void 0===i?void 0:i.length)?(0,n.h)(r,o,i):(0,n.h)(r||"span",o,a.value):i}}}),wt=_t;var Et={components:{Form:kt,Field:bt,ErrorMessage:wt},inject:["emitter"],data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:""}},methods:{createOrder(){const e="https://vue3-course-api.hexschool.io/api/chienyu-api/order",t=this.form;this.axios.post(e,{data:t}).then((e=>{e.data.success&&(console.log("createOrder",e),this.emitter.emit("updateData"),this.orderId=e.data.orderId,this.$router.push(`checkout/${this.orderId}`))}))},validateEmail(e){if(!e)return"這是必填欄位";const t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return!!t.test(e)||"此字段必須是有效的電子郵件"},validateName(e){return!!e||"這是必填欄位"},validateTel(e){if(!e)return"這是必填欄位";const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的手機號碼格式"},validateAddress(e){return!!e||"這是必填欄位"}}},Ct=r(89);const xt=(0,Ct.Z)(Et,[["render",Z]]);var Bt=xt,It={components:{BuyerInfo:Bt},data(){return{carts:[],totalPrice:0,finalPrice:0,couponCode:"",isLoading:!1}},inject:["emitter","currency"],methods:{getCarts(){const e="https://vue3-course-api.hexschool.io/api/chienyu-api/cart";this.isLoading=!0,this.axios.get(e).then((e=>{this.isLoading=!1,this.carts=e.data.data.carts,this.totalPrice=e.data.data.total,this.finalPrice=e.data.data.final_total}))},updateCart(e,t){const r={data:{product_id:e,qty:t}},n=`https://vue3-course-api.hexschool.io/api/chienyu-api/cart/${e}`;this.axios.put(n,r).then((()=>{this.getCarts()}))},deleteCart(e){const t=`https://vue3-course-api.hexschool.io/api/chienyu-api/cart/${e}`;this.axios.delete(t).then((()=>{this.getCarts(),this.emitter.emit("updateData")}))},useCouponCode(){const e="https://vue3-course-api.hexschool.io/api/chienyu-api/coupon";this.axios.post(e,{data:{code:this.couponCode}}).then((()=>{this.getCarts()}))}},beforeCreate(){document.title=this.$route.meta.title},created(){this.getCarts()},mounted(){this.emitter.on("updateData",(()=>{this.getCarts()}))}};const Mt=(0,Ct.Z)(It,[["render",w]]);var Pt=Mt}}]);
//# sourceMappingURL=986.6b9a0d55.js.map