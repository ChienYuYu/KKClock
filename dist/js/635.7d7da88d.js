"use strict";(self["webpackChunkkkclock"]=self["webpackChunkkkclock"]||[]).push([[635],{1635:function(t,e,r){r.r(e),r.d(e,{default:function(){return U}});var l=r(3396),s=r(9242),n=r(7139);const d=t=>((0,l.dD)("data-v-7aa0ce48"),t=t(),(0,l.Cn)(),t),a={class:"container"},c={class:"row justify-content-center mt-5"},o={class:"col-md-4"},i=d((()=>(0,l._)("label",{for:"order_search",class:"form-label d-block text-center h4 mb-4"},"訂單查詢",-1))),u={class:"input-group"},_={key:0,class:"text-center"},h=d((()=>(0,l._)("h2",{class:"text-mygreen py-4"},"請輸入訂單編號",-1))),p=d((()=>(0,l._)("p",{class:"text-secondary"},"( 20碼數字+符號+英文大小寫 )",-1))),y=d((()=>(0,l._)("p",{class:"text-secondary"},"範例: -N8RgQpyakFeuOluP-o-",-1))),m=[h,p,y],b={key:1,class:"row justify-content-center my-5"},x={class:"col-md-10 col-lg-6"},k={class:"table align-middle"},w=d((()=>(0,l._)("thead",null,[(0,l._)("th",null,"品名"),(0,l._)("th",null,"數量"),(0,l._)("th",{class:"text-end"},"小計"),(0,l._)("th",{class:"text-end"},"優惠價")],-1))),g={class:"text-end"},v={class:"text-end"},f={class:"mb-0 d-inline-block text-truncate text-myorange"},I=d((()=>(0,l._)("td",null,null,-1))),z=d((()=>(0,l._)("td",null,null,-1))),D={colspan:"2",class:"text-end"},O={class:"text-myred mb-0"},C=d((()=>(0,l._)("span",{class:"text-muted remind"},"(小數點四捨五入)",-1))),$={class:"table"},L=d((()=>(0,l._)("th",null,"Email",-1))),j=d((()=>(0,l._)("th",null,"姓名",-1))),P=d((()=>(0,l._)("th",null,"收件人電話",-1))),q=d((()=>(0,l._)("th",null,"收件人地址",-1))),H=d((()=>(0,l._)("th",null,"付款狀態",-1))),Y={key:0,class:"text-success"},E={key:1,class:"v-else text-myred"},F=d((()=>(0,l._)("th",null,"訂單編號",-1))),G={class:"text-end"},K={key:0,class:"btn btn-secondary disabled"};function M(t,e,r,d,h,p){const y=(0,l.up)("LoadingPlugin");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(y,{active:h.isLoading},null,8,["active"]),(0,l._)("div",a,[(0,l._)("div",c,[(0,l._)("div",o,[i,(0,l._)("div",u,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"order_search","aria-describedby":"inputGroupPrepend2",required:"","onUpdate:modelValue":e[0]||(e[0]=t=>h.orderId=t)},null,512),[[s.nr,h.orderId]]),(0,l._)("button",{type:"button",class:"btn btn-mygreen text-white",onClick:e[1]||(e[1]=(...t)=>p.searchOrder&&p.searchOrder(...t))},"查詢")]),(0,l._)("p",{class:(0,n.C_)(["text-myred text-center mb-0 mt-2 py-2",{"d-none":"error"!==this.tempOrderId}])}," 訂單編號輸入錯誤，請確認是否輸入正確! ",2)])]),this.orderId!==this.tempOrderId?((0,l.wg)(),(0,l.iD)("div",_,m)):((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("form",x,[(0,l._)("table",k,[w,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.order.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,n.zw)(t.product.title),1),(0,l._)("td",null,(0,n.zw)(t.qty),1),(0,l._)("td",g,"$"+(0,n.zw)(p.currency(t.total)),1),(0,l._)("td",v,[(0,l._)("span",f,"$"+(0,n.zw)(p.currency(t.final_total)),1)])])))),128))]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[I,z,(0,l._)("td",D,[(0,l._)("p",O," 總計 $"+(0,n.zw)(p.currency(Math.round(h.order.total))),1),C])])])]),(0,l._)("table",$,[(0,l._)("tbody",null,[(0,l._)("tr",null,[L,(0,l._)("td",null,(0,n.zw)(h.order.user.email),1)]),(0,l._)("tr",null,[j,(0,l._)("td",null,(0,n.zw)(h.order.user.name),1)]),(0,l._)("tr",null,[P,(0,l._)("td",null,(0,n.zw)(h.order.user.tel),1)]),(0,l._)("tr",null,[q,(0,l._)("td",null,(0,n.zw)(h.order.user.address),1)]),(0,l._)("tr",null,[H,(0,l._)("td",null,[h.order.is_paid?((0,l.wg)(),(0,l.iD)("span",Y,"付款完成")):((0,l.wg)(),(0,l.iD)("span",E,"尚未付款"))])]),(0,l._)("tr",null,[F,(0,l._)("td",null,(0,n.zw)(h.orderId),1)])])]),(0,l._)("div",G,[h.order.is_paid?((0,l.wg)(),(0,l.iD)("button",K,"付款已完成")):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn btn-danger",onClick:e[2]||(e[2]=(...t)=>p.checkout&&p.checkout(...t))},"付款"))])])]))])],64)}var N={inject:["currency"],data(){return{tempOrderId:"xyz",orderId:"",order:{user:{}},isLoading:!1}},methods:{searchOrder(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/chienyu-api/order/${this.orderId}`;this.axios.get(t).then((t=>{this.isLoading=!1,null!==t.data.order?(this.order=t.data.order,this.tempOrderId=t.data.order.id):this.tempOrderId="error"}))},checkout(){const t=`https://vue3-course-api.hexschool.io/api/chienyu-api/pay/${this.orderId}`;this.axios.post(t).then((()=>{this.searchOrder()}))}},beforeCreate(){document.title=this.$route.meta.title}},Q=r(89);const R=(0,Q.Z)(N,[["render",M],["__scopeId","data-v-7aa0ce48"]]);var U=R}}]);
//# sourceMappingURL=635.7d7da88d.js.map