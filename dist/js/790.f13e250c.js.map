{"version":3,"file":"js/790.f13e250c.js","mappings":"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","sources":["webpack://kkclock/./src/views/Management_product.vue","webpack://kkclock/./src/components/ProductModal.vue","webpack://kkclock/./src/components/ProductModal.vue?b0ff","webpack://kkclock/./src/components/DeleteProductModal.vue","webpack://kkclock/./src/components/DeleteProductModal.vue?a8db","webpack://kkclock/./src/views/Management_product.vue?a402"],"sourcesContent":["<template>\n  <LoadingPlugin v-model:active=\"isLoading\"></LoadingPlugin>\n  <div class=\"container\">\n    <div class=\"my-4 d-flex justify-content-between\">\n      <h2>產品管理</h2>\n      <button type=\"button\" class=\"btn btn-dark text-warning\" @click=\"openProductModal(true)\">\n        <i class=\"bi bi-bag-plus-fill me-2\"></i>新增產品&ensp;\n      </button>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">類別</th>\n          <th scope=\"col\">名稱</th>\n          <th scope=\"col\">原價</th>\n          <th scope=\"col\">售價</th>\n          <th scope=\"col\">是否啟用</th>\n          <th scope=\"col\">編輯/刪除</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td>{{ item.category }}</td>\n          <td>{{ item.title }}</td>\n          <td>{{ currency(item.origin_price) }}</td>\n          <td>{{ currency(item.price) }}</td>\n          <td>\n            <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\n            <span class=\"text-muted\" v-else>未啟用</span>\n          </td>\n          <td>\n            <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n              <button\n                type=\"button\"\n                class=\"btn btn-primary text-white\"\n                @click=\"openProductModal(false, item)\"\n              >\n                編輯\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-danger text-white\"\n                @click=\"openDeleteModal(item)\"\n              >\n                刪除\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- components-- -->\n\n  <!-- 新增/編輯 modal -->\n  <ProductModal\n    ref=\"productModal\"\n    :product=\"tempProduct\"\n    @update-product=\"updateProduct\"\n  ></ProductModal>\n  <!-- 刪除modal-- -->\n  <DeleteProductModal\n    ref=\"deleteProductModal\"\n    :product=\"tempProduct\"\n    @delete-item=\"deleteProduct\"\n  ></DeleteProductModal>\n  <!-- 分頁------ -->\n  <div class=\"container\">\n    <Pagination\n      :pages=\"pagination\"\n      @page-num=\"getProducts\"\n      @pre-page=\"getProducts\"\n      @next-page=\"getProducts\"\n    ></Pagination>\n  </div>\n</template>\n\n<script>\nimport ProductModal from '../components/ProductModal.vue';\nimport DeleteProductModal from '../components/DeleteProductModal.vue';\nimport Pagination from '../components/PaginationView.vue';\n\nexport default {\n  inject: ['currency', 'emitter'],\n  data() {\n    return {\n      products: [],\n      pagination: {}, // 分頁\n      tempProduct: {},\n      isNew: false, // 用於判斷是新增還是編輯\n      isLoading: false, // 讀取效果插件\n    };\n  },\n  methods: {\n    getProducts(page = 1) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;\n      this.isLoading = true;\n      this.axios.get(api).then((res) => {\n        this.isLoading = false;\n        this.products = res.data.products;\n        this.pagination = res.data.pagination;\n      });\n    },\n    // 開啟新增/編輯modal\n    openProductModal(isNew, item) {\n      if (isNew) {\n        this.tempProduct = {};\n      } else {\n        // this.tempProduct = item;\n        // 上面這樣寫會有bug↑，如果開啟編輯modal並改欄位的值，\n        // 按取消關閉modal後更改的值會套用，需重新整理才會消失。\n        // 用下面淺層拷貝寫法才不會有這個問題\n        this.tempProduct = { ...item };\n      }\n      this.$refs.productModal.showModal();\n      this.isNew = isNew;\n    },\n    updateProduct(item) {\n      // this.tempProduct = item;//\n      // 新增\n      if (this.isNew) {\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;\n        this.axios.post(api, { data: item }).then((res) => {\n          this.$refs.productModal.hideModal();\n          if (res.data.success) {\n            this.getProducts();\n            this.emitter.emit('push-message', {\n              style: 'success',\n              title: '新增成功',\n            });\n          } else {\n            this.emitter.emit('push-message', {\n              style: 'danger',\n              title: '新增失敗',\n              content: res.data.message.join('、'),\n            });\n          }\n        });\n        // 編輯\n      } else {\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;\n        this.axios.put(api, { data: item }).then((res) => {\n          this.$refs.productModal.hideModal();\n          if (res.data.success) {\n            this.getProducts();\n            this.emitter.emit('push-message', {\n              style: 'mygreen',\n              title: '更新成功',\n            });\n          } else {\n            this.emitter.emit('push-message', {\n              style: 'myred',\n              title: '更新失敗',\n              content: res.data.message.join('、'),\n            });\n          }\n        });\n      }\n    },\n    // 開啟刪除modal\n    openDeleteModal(item) {\n      this.$refs.deleteProductModal.showModal();\n      this.tempProduct = item;\n    },\n    // 刪除api\n    deleteProduct(item) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;\n      this.axios.delete(api).then(() => {\n        this.$refs.deleteProductModal.hideModal();\n        this.getProducts();\n        this.emitter.emit('push-message', {\n          style: 'mygreen',\n          title: '刪除成功',\n        });\n      });\n    },\n  },\n  components: {\n    ProductModal,\n    DeleteProductModal,\n    Pagination,\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n<LoadingPlugin v-model:active=\"isLoading\"></LoadingPlugin>\n  <div class=\"modal\" tabindex=\"-1\" ref=\"modal\">\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-light\">\n          <h5 class=\"modal-title\">產品管理</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-8\">\n              <div class=\"row\">\n                <div class=\"col-12 mb-3\">\n                  <label for=\"productName\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">產品名稱</p>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"productName\"\n                      placeholder=\"請輸入產品名稱\"\n                      v-model=\"tempProduct.title\">\n                  </label>\n                </div>\n                <div class=\"col-6 mb-3\">\n                  <label for=\"productCategory\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">分類</p>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"productCategory\"\n                      placeholder=\"請輸入分類名稱\"\n                      v-model=\"tempProduct.category\">\n                  </label>\n                </div>\n                <div class=\"col-6 mb-3\">\n                  <label for=\"productUnit\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">單位</p>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"productUnit\"\n                      placeholder=\"請輸入單位名稱\"\n                      v-model=\"tempProduct.unit\">\n                  </label>\n                </div>\n                <div class=\"col-6 mb-3\">\n                  <label for=\"originalPrice\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">原價</p>\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"originalPrice\"\n                      placeholder=\"請輸入原價\"\n                      v-model=\"tempProduct.origin_price\">\n                  </label>\n                </div>\n                <div class=\"col-6 mb-3\">\n                  <label for=\"productPrice\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">售價</p>\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"productPrice\"\n                      placeholder=\"請輸入售價\"\n                      v-model=\"tempProduct.price\">\n                  </label>\n                </div>\n                <div class=\"col-12 mb-3\">\n                  <label for=\"productDescription\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">產品描述</p>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"productDescription\"\n                      placeholder=\"請輸入產品描述\"\n                      v-model=\"tempProduct.description\">\n                  </label>\n                </div>\n                <div class=\"col-12 mb-3\">\n                  <label for=\"productContent\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">產品內容</p>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"productContent\"\n                      placeholder=\"請輸入產品內容\"\n                      v-model=\"tempProduct.content\">\n                  </label>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-4\">\n              <div class=\"row\">\n                <div class=\"col-12 mb-3\">\n                  <label for=\"productUrl\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">輸入圖片網址</p>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"productUrl\"\n                      placeholder=\"輸入圖片網址\"\n                      v-model=\"tempProduct.imageUrl\">\n                  </label>\n                </div>\n                <div class=\"col-12 mb-3\">\n                  <label for=\"uploadImg\" class=\"form-label w-100\">\n                    <p class=\"mb-2\">上傳圖片</p>\n                    <input\n                      type=\"file\"\n                      class=\"form-control\"\n                      id=\"uploadImg\"\n                      ref=\"fileInput\"\n                      @change=\"uploadFile\">\n                  </label>\n                </div>\n                <div>\n                  <img :src=\"tempProduct.imageUrl\" alt=\"\" class=\"img-fluid\">\n                </div>\n                <div class=\"col-12\">\n                  <div class=\"form-check\">\n                    <label class=\"form-check-label\" for=\"enableProduct\">\n                      啟用\n                      <input class=\"form-check-input\" type=\"checkbox\"\n                      id=\"enableProduct\"\n                      v-model=\"tempProduct.is_enabled\">\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">取消</button>\n          <button type=\"button\" class=\"btn btn-primary text-white\"\n          @click=\"$emit('update-product', tempProduct)\">確認</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: ['product'],\n  emits: ['update-product'], // 沒這句會有黃色警告\n  data() {\n    return {\n      modal: {},\n      tempProduct: {},\n      isLoading: false,\n    };\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    },\n  },\n  methods: {\n    uploadFile() {\n      // 參考https://openhome.cc/Gossip/ECMAScript/FormData.html\n      const uploadImg = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadImg);\n      // ------------------\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.isLoading = true;\n      this.axios.post(api, formData).then((res) => {\n        this.isLoading = false;\n        if (res.data.success) {\n          this.tempProduct.imageUrl = res.data.imageUrl;\n          this.$refs.fileInput.value = ''; // 完成後清空上傳圖片<input>\n        }\n      });\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./ProductModal.vue?vue&type=template&id=4212e9d7\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\C\\\\Desktop\\\\vueClock\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n <div class=\"modal\" tabindex=\"-1\" ref=\"modal\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content border-0\">\n      <div class=\"modal-header bg-danger\">\n        <h5 class=\"modal-title text-white\">刪除</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <p>類別:【{{product.category}}】 名稱:【{{product.title}}】</p>\n          <p class=\"text-danger\">※ 刪除後將無法復原!</p>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">取消</button>\n        <button type=\"button\" class=\"btn btn-danger text-white\"\n        @click=\"$emit('delete-item', product)\">確認</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: ['product'],\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./DeleteProductModal.vue?vue&type=template&id=cbdd8fd2\"\nimport script from \"./DeleteProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\C\\\\Desktop\\\\vueClock\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Management_product.vue?vue&type=template&id=d82cecbc\"\nimport script from \"./Management_product.vue?vue&type=script&lang=js\"\nexport * from \"./Management_product.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\C\\\\Desktop\\\\vueClock\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_4","scope","role","_createVNode","_component_LoadingPlugin","active","$data","$event","_hoisted_3","type","onClick","$options","_hoisted_8","_createElementBlock","_Fragment","_renderList","item","key","id","_toDisplayString","category","title","origin_price","price","is_enabled","_hoisted_12","_hoisted_13","_component_ProductModal","ref","product","onUpdateProduct","_component_DeleteProductModal","onDeleteItem","_component_Pagination","pages","onPageNum","onPrePage","onNextPage","tabindex","for","_hoisted_11","placeholder","_hoisted_14","_hoisted_17","unit","_hoisted_20","_hoisted_23","_hoisted_26","description","_hoisted_29","content","_hoisted_34","imageUrl","_hoisted_37","onChange","src","alt","_hoisted_44","_ctx","props","emits","data","modal","tempProduct","isLoading","watch","this","methods","uploadFile","uploadImg","$refs","fileInput","files","formData","FormData","append","api","axios","post","then","res","success","value","mixins","modalMixin","__exports__","$props","_hoisted_6","inject","products","pagination","isNew","getProducts","page","get","openProductModal","productModal","showModal","updateProduct","hideModal","emitter","emit","style","message","join","put","openDeleteModal","deleteProductModal","deleteProduct","delete","components","ProductModal","DeleteProductModal","Pagination","created","render"],"sourceRoot":""}