{"version":3,"file":"js/259.76f7a757.js","mappings":"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","sources":["webpack://kkclock/./src/methods/currency.js","webpack://kkclock/./src/views/front/KKClockOrderSearch.vue","webpack://kkclock/./src/views/front/KKClockOrderSearch.vue?b400"],"sourcesContent":["export default function currency(num) {\n  const n = parseInt(num, 10);\n  return `${n.toFixed(0).replace(/./g, (c, i, a) => (i && c !== '.' && ((a.length - i) % 3 === 0) ? `, ${c}`.replace(/\\s/g, '') : c))}`;\n}\n","<template>\n  <LoadingPlugin :active=\"isLoading\" />\n  <div class=\"container\">\n    <div class=\"row justify-content-center mt-5 pt-5\">\n      <div class=\"col-md-5\">\n        <label for=\"order_search\" class=\"form-label d-block text-center h4 mb-4\">訂單查詢</label>\n        <div class=\"input-group\">\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"order_search\"\n            aria-describedby=\"inputGroupPrepend2\"\n            required\n            v-model=\"orderId\"\n          />\n          <button type=\"button\" class=\"btn btn-myorange text-white\" @click=\"searchOrder\">\n            查詢\n          </button>\n        </div>\n        <p\n          class=\"text-myred text-center mb-0 mt-2 py-2\"\n          :class=\"{ 'd-none': tempOrderId !== 'error' }\"\n        >\n          訂單編號輸入錯誤，請確認是否輸入正確!\n        </p>\n      </div>\n    </div>\n    <div v-if=\"orderId !== tempOrderId\" class=\"text-center\">\n      <h2 class=\"text-myorange py-4\">請輸入訂單編號</h2>\n      <p class=\"text-secondary\">( 20碼數字+符號+英文大小寫 )</p>\n      <p class=\"text-secondary\">範例: -NANgXsFQqCED1tUrEIz</p>\n    </div>\n    <div class=\"row justify-content-center my-5\" v-else>\n      <form class=\"col-md-10 col-lg-6\" @submit.prevent=\"checkout\">\n        <table class=\"table align-middle\">\n          <thead>\n            <th>品名</th>\n            <th>數量</th>\n            <th class=\"text-end\">小計</th>\n            <th class=\"text-end\">優惠價</th>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in order.products\" :key=\"item.id\">\n              <td>{{ item.product.title }}</td>\n              <td>{{ item.qty }}</td>\n              <td class=\"text-end\">${{ currency(item.total) }}</td>\n              <td class=\"text-end\">\n                <span class=\"mb-0 d-inline-block text-truncate text-myorange\"\n                  >${{ currency(item.final_total) }}\n                </span>\n              </td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td />\n              <td />\n              <td colspan=\"2\" class=\"text-end\">\n                <p class=\"text-myred mb-0\">總計 ${{ currency(Math.round(order.total)) }}</p>\n                <span class=\"text-muted remind\">(小數點四捨五入)</span>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n        <table class=\"table\">\n          <tbody>\n            <tr>\n              <th class=\"text-nowrap\">Email</th>\n              <td>{{ order.user.email }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-nowrap\">姓名</th>\n              <td>{{ order.user.name }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-nowrap\">收件人電話</th>\n              <td>{{ order.user.tel }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-nowrap\">收件人地址</th>\n              <td>{{ order.user.address }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-nowrap\">付款狀態</th>\n              <td>\n                <span class=\"text-success\" v-if=\"order.is_paid\">付款完成</span>\n                <span class=\"v-else text-myred\" v-else>尚未付款</span>\n              </td>\n            </tr>\n            <tr>\n              <th class=\"text-nowrap\">訂單編號</th>\n              <td>{{ orderId }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-nowrap\">留言</th>\n              <td>{{ order.message }}</td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"text-end\">\n          <input\n            type=\"button\"\n            value=\"付款已完成\"\n            class=\"btn btn-secondary disabled\"\n            v-if=\"order.is_paid\"\n          />\n          <input type=\"submit\" value=\"付款\" class=\"btn btn-danger\" v-else />\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Swal from 'sweetalert2';\nimport currency from '@/methods/currency';\nimport { ref, inject } from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  setup() {\n    const router = useRouter();\n    const axios = inject('axios');\n    const tempOrderId = ref('xyz');\n    const orderId = ref('');\n    const order = ref({ user: {} });\n    const isLoading = ref(false);\n\n    const searchOrder = () => {\n      if (orderId.value.trim() !== '') {\n        isLoading.value = true;\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${orderId.value}`;\n        axios.get(api)\n          .then((res) => {\n            if (res.data.order !== null) {\n              order.value = res.data.order;\n              tempOrderId.value = res.data.order.id;\n            } else {\n              tempOrderId.value = 'error';\n            }\n            isLoading.value = false;\n          })\n          .catch(() => {\n            isLoading.value = false;\n            Swal.fire({\n              title: '似乎有些問題 請稍後再嘗試',\n              icon: 'error',\n              showConfirmButton: false,\n              timer: 2000,\n            });\n          });\n      } else {\n        tempOrderId.value = 'error';\n      }\n    };\n    const checkout = () => {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${orderId.value}`;\n      axios.post(api)\n        .then(() => {\n          router.push(`/pay_completed/${orderId.value}`);\n        })\n        .catch(() => {\n          Swal.fire({\n            title: '似乎有些問題 請稍後再嘗試',\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 2000,\n          });\n        });\n    };\n\n    return {\n      tempOrderId, orderId, order, isLoading, searchOrder, checkout, currency,\n    };\n  },\n};\n</script>\n<style scoped>\n.remind {\n  font-size: 12px;\n}\n</style>\n","import { render } from \"./KKClockOrderSearch.vue?vue&type=template&id=3a390c59&scoped=true\"\nimport script from \"./KKClockOrderSearch.vue?vue&type=script&lang=js\"\nexport * from \"./KKClockOrderSearch.vue?vue&type=script&lang=js\"\n\nimport \"./KKClockOrderSearch.vue?vue&type=style&index=0&id=3a390c59&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\myProject\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3a390c59\"]])\n\nexport default __exports__"],"names":["currency","num","n","parseInt","toFixed","replace","c","i","a","length","class","_createElementVNode","for","_hoisted_7","_hoisted_8","_hoisted_9","colspan","type","value","_createVNode","_component_LoadingPlugin","active","$setup","_hoisted_4","id","required","$event","onClick","_createElementBlock","_hoisted_10","onSubmit","_hoisted_13","_Fragment","_renderList","products","item","key","_toDisplayString","product","title","qty","total","final_total","_hoisted_17","_hoisted_18","Math","round","_hoisted_21","_hoisted_23","user","email","_hoisted_24","name","_hoisted_25","tel","_hoisted_26","address","_hoisted_27","is_paid","_hoisted_30","_hoisted_31","message","setup","router","useRouter","axios","inject","tempOrderId","ref","orderId","order","isLoading","searchOrder","trim","api","get","then","res","data","catch","Swal","icon","showConfirmButton","timer","checkout","post","push","__exports__","render"],"sourceRoot":""}