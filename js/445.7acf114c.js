"use strict";(self["webpackChunkkkclock"]=self["webpackChunkkkclock"]||[]).push([[445],{1720:function(t,e,l){l.d(e,{Z:function(){return x}});var n=l(3396),s=l(7139);const r={class:"mt-5 pt-5 container d-flex justify-content-center"},u={class:"step-list list-unstyled rounded-3 overflow-hidden"},a=(0,n.Uk)("STEP1"),c=(0,n._)("br",null,null,-1),o=(0,n.Uk)("確認訂單"),i=[a,c,o],d=(0,n.Uk)("STEP2"),_=(0,n._)("br",null,null,-1),p=(0,n.Uk)("填寫資料"),h=[d,_,p],v=(0,n.Uk)("STEP3"),m=(0,n._)("br",null,null,-1),y=(0,n.Uk)("確認付款"),k=[v,m,y];function w(t,e,l,a,c,o){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("ul",u,[(0,n._)("li",{class:(0,s.C_)({"step-active":1===c.stepStatus})},i,2),(0,n._)("li",{class:(0,s.C_)({"step-active":2===c.stepStatus})},h,2),(0,n._)("li",{class:(0,s.C_)({"step-active":3===c.stepStatus})},k,2)])])}var f={data(){return{stepStatus:0}},created(){"/cart"===this.$route.path&&(this.stepStatus=1),"/buyer_info"===this.$route.path&&(this.stepStatus=2),this.$route.path===`/checkout/${this.$route.params.orderId}`&&(this.stepStatus=3)}},b=l(89);const g=(0,b.Z)(f,[["render",w]]);var x=g},7445:function(t,e,l){l.r(e),l.d(e,{default:function(){return Y}});var n=l(3396),s=l(9242),r=l(7139);const u=t=>((0,n.dD)("data-v-c7203232"),t=t(),(0,n.Cn)(),t),a={class:"container"},c={class:"row justify-content-center my-5"},o={class:"table align-middle"},i=u((()=>(0,n._)("thead",null,[(0,n._)("th",null,"品名"),(0,n._)("th",null,"數量"),(0,n._)("th",{class:"text-end"},"小計"),(0,n._)("th",{class:"text-end"},"折扣後$")],-1))),d={class:"text-end"},_={class:"text-end"},p={class:"mb-0 d-inline-block text-truncate text-myorange"},h=u((()=>(0,n._)("td",null,null,-1))),v=u((()=>(0,n._)("td",null,null,-1))),m={colspan:"2",class:"text-end"},y={class:"text-myred mb-0"},k=u((()=>(0,n._)("span",{class:"text-muted remind"},"(小數點四捨五入)",-1))),w={class:"table"},f=u((()=>(0,n._)("th",null,"Email",-1))),b=u((()=>(0,n._)("th",null,"姓名",-1))),g=u((()=>(0,n._)("th",null,"收件人電話",-1))),x=u((()=>(0,n._)("th",null,"收件人地址",-1))),$=u((()=>(0,n._)("th",null,"付款狀態",-1))),z={key:0,class:"text-success"},S={key:1,class:"v-else text-myred"},D=u((()=>(0,n._)("th",null,"訂單編號",-1))),C=u((()=>(0,n._)("th",null,"留言",-1))),P={class:"text-end"},H={key:0,type:"button",value:"付款已完成",class:"btn btn-secondary disabled"},U={key:1,type:"submit",value:"付款",class:"btn btn-danger"};function I(t,e,l,u,I,j){const B=(0,n.up)("LoadingPlugin"),E=(0,n.up)("ProgressBar");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(B,{active:u.isLoading},null,8,["active"]),(0,n.Wm)(E),(0,n._)("div",a,[(0,n._)("div",c,[(0,n._)("form",{class:"col-md-10 col-lg-6",onSubmit:e[0]||(e[0]=(0,s.iM)(((...t)=>u.checkout&&u.checkout(...t)),["prevent"]))},[(0,n._)("table",o,[i,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.order.products,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,(0,r.zw)(t.product.title),1),(0,n._)("td",null,(0,r.zw)(t.qty),1),(0,n._)("td",d,"$"+(0,r.zw)(j.currency(t.total)),1),(0,n._)("td",_,[(0,n._)("span",p,"$"+(0,r.zw)(j.currency(t.final_total)),1)])])))),128))]),(0,n._)("tfoot",null,[(0,n._)("tr",null,[h,v,(0,n._)("td",m,[(0,n._)("p",y,"總計 $"+(0,r.zw)(j.currency(u.finalPrice)),1),k])])])]),(0,n._)("table",w,[(0,n._)("tbody",null,[(0,n._)("tr",null,[f,(0,n._)("td",null,(0,r.zw)(u.order.user.email),1)]),(0,n._)("tr",null,[b,(0,n._)("td",null,(0,r.zw)(u.order.user.name),1)]),(0,n._)("tr",null,[g,(0,n._)("td",null,(0,r.zw)(u.order.user.tel),1)]),(0,n._)("tr",null,[x,(0,n._)("td",null,(0,r.zw)(u.order.user.address),1)]),(0,n._)("tr",null,[$,(0,n._)("td",null,[u.order.is_paid?((0,n.wg)(),(0,n.iD)("span",z,"付款完成")):((0,n.wg)(),(0,n.iD)("span",S,"尚未付款"))])]),(0,n._)("tr",null,[D,(0,n._)("td",null,(0,r.zw)(u.orderId),1)]),(0,n._)("tr",null,[C,(0,n._)("td",null,(0,r.zw)(u.order.message),1)])])]),(0,n._)("div",P,[u.order.is_paid?((0,n.wg)(),(0,n.iD)("input",H)):((0,n.wg)(),(0,n.iD)("input",U))])],32)])])],64)}var j=l(4870),B=l(2483),E=l(2492),Z=l.n(E),L=l(1720),T={inject:["currency"],components:{ProgressBar:L.Z},setup(){const t=(0,n.f3)("axios"),e=(0,B.tv)(),l=(0,B.yj)(),s=(0,j.iH)({user:{}}),r=(0,j.iH)(""),u=(0,j.iH)(0),a=(0,j.iH)(!1);r.value=l.params.orderId;const c=()=>{const e=`https://vue3-course-api.hexschool.io/api/chienyu-api/order/${r.value}`;a.value=!0,t.get(e).then((t=>{s.value=t.data.order,u.value=Math.round(t.data.order.total),a.value=!1})).catch((()=>{a.value=!1,Z().fire({title:"似乎有些問題 請稍後再來訪",icon:"error",showConfirmButton:!1,timer:2e3})}))};c();const o=()=>{const l=`https://vue3-course-api.hexschool.io/api/chienyu-api/pay/${r.value}`;t.post(l).then((()=>{c(),e.push(`/pay_completed/${r.value}`)})).catch((()=>{Z().fire({title:"似乎有些問題 請稍後再嘗試",icon:"error",showConfirmButton:!1,timer:2e3})}))};return{order:s,orderId:r,finalPrice:u,isLoading:a,getOrder:c,checkout:o}}},M=l(89);const W=(0,M.Z)(T,[["render",I],["__scopeId","data-v-c7203232"]]);var Y=W}}]);
//# sourceMappingURL=445.7acf114c.js.map