{"version":3,"file":"js/445.7acf114c.js","mappings":"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","sources":["webpack://kkclock/./src/components/front/ProgressBar.vue","webpack://kkclock/./src/components/front/ProgressBar.vue?9b33","webpack://kkclock/./src/views/front/KKClockCheckout.vue","webpack://kkclock/./src/views/front/KKClockCheckout.vue?ec27"],"sourcesContent":["<template>\n  <div class=\"mt-5 pt-5 container d-flex justify-content-center\">\n    <ul class=\"step-list list-unstyled rounded-3 overflow-hidden\">\n      <li :class=\"{ 'step-active': stepStatus === 1 }\">STEP1<br />確認訂單</li>\n      <li :class=\"{ 'step-active': stepStatus === 2 }\">STEP2<br />填寫資料</li>\n      <li :class=\"{ 'step-active': stepStatus === 3 }\">STEP3<br />確認付款</li>\n    </ul>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      stepStatus: 0,\n    };\n  },\n  created() {\n    if (this.$route.path === '/cart') {\n      this.stepStatus = 1;\n    }\n    if (this.$route.path === '/buyer_info') {\n      this.stepStatus = 2;\n    }\n    if (this.$route.path === `/checkout/${this.$route.params.orderId}`) {\n      this.stepStatus = 3;\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.step-list {\n  border: 1px solid #777;\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  li {\n    padding: 0 5rem;\n    @media (max-width: 767.98px) {\n      padding: 0 1.4rem;\n    }\n  }\n  li + li {\n    border-left: 1px solid #777;\n  }\n}\n.step-active {\n  background: #777;\n  color: #fff;\n}\n</style>\n","import { render } from \"./ProgressBar.vue?vue&type=template&id=29ff2731\"\nimport script from \"./ProgressBar.vue?vue&type=script&lang=js\"\nexport * from \"./ProgressBar.vue?vue&type=script&lang=js\"\n\nimport \"./ProgressBar.vue?vue&type=style&index=0&id=29ff2731&lang=scss\"\n\nimport exportComponent from \"S:\\\\myProject\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <LoadingPlugin :active=\"isLoading\" />\n  <ProgressBar />\n  <div class=\"container\">\n    <div class=\"row justify-content-center my-5\">\n      <form class=\"col-md-10 col-lg-6\" @submit.prevent=\"checkout\">\n        <table class=\"table align-middle\">\n          <thead>\n            <th>品名</th>\n            <th>數量</th>\n            <th class=\"text-end\">小計</th>\n            <th class=\"text-end\">折扣後$</th>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in order.products\" :key=\"item.id\">\n              <td>{{ item.product.title }}</td>\n              <td>{{ item.qty }}</td>\n              <td class=\"text-end\">${{ currency(item.total) }}</td>\n              <td class=\"text-end\">\n                <span class=\"mb-0 d-inline-block text-truncate text-myorange\"\n                  >${{ currency(item.final_total) }}</span\n                >\n              </td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td />\n              <td />\n              <td colspan=\"2\" class=\"text-end\">\n                <p class=\"text-myred mb-0\">總計 ${{ currency(finalPrice) }}</p>\n                <span class=\"text-muted remind\">(小數點四捨五入)</span>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n        <table class=\"table\">\n          <tbody>\n            <tr>\n              <th>Email</th>\n              <td>{{ order.user.email }}</td>\n            </tr>\n            <tr>\n              <th>姓名</th>\n              <td>{{ order.user.name }}</td>\n            </tr>\n            <tr>\n              <th>收件人電話</th>\n              <td>{{ order.user.tel }}</td>\n            </tr>\n            <tr>\n              <th>收件人地址</th>\n              <td>{{ order.user.address }}</td>\n            </tr>\n            <tr>\n              <th>付款狀態</th>\n              <td>\n                <span class=\"text-success\" v-if=\"order.is_paid\">付款完成</span>\n                <span class=\"v-else text-myred\" v-else>尚未付款</span>\n              </td>\n            </tr>\n            <tr>\n              <th>訂單編號</th>\n              <td>{{ orderId }}</td>\n            </tr>\n            <tr>\n              <th>留言</th>\n              <td>{{ order.message }}</td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"text-end\">\n          <input\n            type=\"button\"\n            value=\"付款已完成\"\n            class=\"btn btn-secondary disabled\"\n            v-if=\"order.is_paid\"\n          />\n          <input type=\"submit\" value=\"付款\" class=\"btn btn-danger\" v-else />\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, inject } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport Swal from 'sweetalert2';\nimport ProgressBar from '@/components/front/ProgressBar.vue';\n\nexport default {\n  inject: ['currency'],\n  components: {\n    ProgressBar,\n  },\n  setup() {\n    const axios = inject('axios');\n    const router = useRouter();\n    const route = useRoute();\n    const order = ref({ user: {} });\n    // const order = ref({});\n    const orderId = ref('');\n    const finalPrice = ref(0);\n    const isLoading = ref(false);\n\n    orderId.value = route.params.orderId;\n\n    const getOrder = () => {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${orderId.value}`;\n      isLoading.value = true;\n      axios.get(api)\n        .then((res) => {\n          order.value = res.data.order;\n          finalPrice.value = Math.round(res.data.order.total);\n          isLoading.value = false;\n        })\n        .catch(() => {\n          isLoading.value = false;\n          Swal.fire({\n            title: '似乎有些問題 請稍後再來訪',\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 2000,\n          });\n        });\n    };\n    getOrder();\n\n    const checkout = () => {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${orderId.value}`;\n      axios.post(api)\n        .then(() => {\n          getOrder();\n          router.push(`/pay_completed/${orderId.value}`);\n        })\n        .catch(() => {\n          Swal.fire({\n            title: '似乎有些問題 請稍後再嘗試',\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 2000,\n          });\n        });\n    };\n\n    return {\n      order,\n      orderId,\n      finalPrice,\n      isLoading,\n      getOrder,\n      checkout,\n    };\n  },\n\n};\n</script>\n\n<style scoped>\n.remind {\n  font-size: 12px;\n}\n</style>\n","import { render } from \"./KKClockCheckout.vue?vue&type=template&id=c7203232&scoped=true\"\nimport script from \"./KKClockCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./KKClockCheckout.vue?vue&type=script&lang=js\"\n\nimport \"./KKClockCheckout.vue?vue&type=style&index=0&id=c7203232&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\myProject\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c7203232\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_4","_hoisted_8","_hoisted_12","_createElementBlock","$data","data","stepStatus","created","this","$route","path","params","orderId","__exports__","render","colspan","type","value","_createVNode","_component_LoadingPlugin","active","$setup","_component_ProgressBar","onSubmit","_Fragment","_renderList","products","item","key","id","_toDisplayString","product","title","qty","$options","total","final_total","_hoisted_9","_hoisted_14","user","email","_hoisted_15","name","_hoisted_16","tel","_hoisted_17","address","_hoisted_18","is_paid","_hoisted_21","_hoisted_22","message","inject","components","ProgressBar","setup","axios","router","useRouter","route","useRoute","order","ref","finalPrice","isLoading","getOrder","api","get","then","res","Math","round","catch","Swal","icon","showConfirmButton","timer","checkout","post","push"],"sourceRoot":""}