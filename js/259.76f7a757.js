"use strict";(self["webpackChunkkkclock"]=self["webpackChunkkkclock"]||[]).push([[259],{8379:function(t,e,r){function l(t){const e=parseInt(t,10);return`${e.toFixed(0).replace(/./g,((t,e,r)=>e&&"."!==t&&(r.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t))}`}r.d(e,{Z:function(){return l}})},4259:function(t,e,r){r.r(e),r.d(e,{default:function(){return X}});var l=r(3396),n=r(9242),a=r(7139);const s=t=>((0,l.dD)("data-v-3a390c59"),t=t(),(0,l.Cn)(),t),c={class:"container"},o={class:"row justify-content-center mt-5 pt-5"},d={class:"col-md-5"},u=s((()=>(0,l._)("label",{for:"order_search",class:"form-label d-block text-center h4 mb-4"},"訂單查詢",-1))),i={class:"input-group"},_={key:0,class:"text-center"},p=s((()=>(0,l._)("h2",{class:"text-myorange py-4"},"請輸入訂單編號",-1))),h=s((()=>(0,l._)("p",{class:"text-secondary"},"( 20碼數字+符號+英文大小寫 )",-1))),y=s((()=>(0,l._)("p",{class:"text-secondary"},"範例: -NANgXsFQqCED1tUrEIz",-1))),m=[p,h,y],w={key:1,class:"row justify-content-center my-5"},x={class:"table align-middle"},v=s((()=>(0,l._)("thead",null,[(0,l._)("th",null,"品名"),(0,l._)("th",null,"數量"),(0,l._)("th",{class:"text-end"},"小計"),(0,l._)("th",{class:"text-end"},"優惠價")],-1))),b={class:"text-end"},g={class:"text-end"},f={class:"mb-0 d-inline-block text-truncate text-myorange"},k=s((()=>(0,l._)("td",null,null,-1))),z=s((()=>(0,l._)("td",null,null,-1))),D={colspan:"2",class:"text-end"},I={class:"text-myred mb-0"},C=s((()=>(0,l._)("span",{class:"text-muted remind"},"(小數點四捨五入)",-1))),$={class:"table"},H=s((()=>(0,l._)("th",{class:"text-nowrap"},"Email",-1))),O=s((()=>(0,l._)("th",{class:"text-nowrap"},"姓名",-1))),q=s((()=>(0,l._)("th",{class:"text-nowrap"},"收件人電話",-1))),E=s((()=>(0,l._)("th",{class:"text-nowrap"},"收件人地址",-1))),L=s((()=>(0,l._)("th",{class:"text-nowrap"},"付款狀態",-1))),Z={key:0,class:"text-success"},j={key:1,class:"v-else text-myred"},B=s((()=>(0,l._)("th",{class:"text-nowrap"},"訂單編號",-1))),F=s((()=>(0,l._)("th",{class:"text-nowrap"},"留言",-1))),M={class:"text-end"},N={key:0,type:"button",value:"付款已完成",class:"btn btn-secondary disabled"},P={key:1,type:"submit",value:"付款",class:"btn btn-danger"};function U(t,e,r,s,p,h){const y=(0,l.up)("LoadingPlugin");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(y,{active:s.isLoading},null,8,["active"]),(0,l._)("div",c,[(0,l._)("div",o,[(0,l._)("div",d,[u,(0,l._)("div",i,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"order_search","aria-describedby":"inputGroupPrepend2",required:"","onUpdate:modelValue":e[0]||(e[0]=t=>s.orderId=t)},null,512),[[n.nr,s.orderId]]),(0,l._)("button",{type:"button",class:"btn btn-myorange text-white",onClick:e[1]||(e[1]=(...t)=>s.searchOrder&&s.searchOrder(...t))}," 查詢 ")]),(0,l._)("p",{class:(0,a.C_)(["text-myred text-center mb-0 mt-2 py-2",{"d-none":"error"!==s.tempOrderId}])}," 訂單編號輸入錯誤，請確認是否輸入正確! ",2)])]),s.orderId!==s.tempOrderId?((0,l.wg)(),(0,l.iD)("div",_,m)):((0,l.wg)(),(0,l.iD)("div",w,[(0,l._)("form",{class:"col-md-10 col-lg-6",onSubmit:e[2]||(e[2]=(0,n.iM)(((...t)=>s.checkout&&s.checkout(...t)),["prevent"]))},[(0,l._)("table",x,[v,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.order.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,a.zw)(t.product.title),1),(0,l._)("td",null,(0,a.zw)(t.qty),1),(0,l._)("td",b,"$"+(0,a.zw)(s.currency(t.total)),1),(0,l._)("td",g,[(0,l._)("span",f,"$"+(0,a.zw)(s.currency(t.final_total)),1)])])))),128))]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[k,z,(0,l._)("td",D,[(0,l._)("p",I,"總計 $"+(0,a.zw)(s.currency(Math.round(s.order.total))),1),C])])])]),(0,l._)("table",$,[(0,l._)("tbody",null,[(0,l._)("tr",null,[H,(0,l._)("td",null,(0,a.zw)(s.order.user.email),1)]),(0,l._)("tr",null,[O,(0,l._)("td",null,(0,a.zw)(s.order.user.name),1)]),(0,l._)("tr",null,[q,(0,l._)("td",null,(0,a.zw)(s.order.user.tel),1)]),(0,l._)("tr",null,[E,(0,l._)("td",null,(0,a.zw)(s.order.user.address),1)]),(0,l._)("tr",null,[L,(0,l._)("td",null,[s.order.is_paid?((0,l.wg)(),(0,l.iD)("span",Z,"付款完成")):((0,l.wg)(),(0,l.iD)("span",j,"尚未付款"))])]),(0,l._)("tr",null,[B,(0,l._)("td",null,(0,a.zw)(s.orderId),1)]),(0,l._)("tr",null,[F,(0,l._)("td",null,(0,a.zw)(s.order.message),1)])])]),(0,l._)("div",M,[s.order.is_paid?((0,l.wg)(),(0,l.iD)("input",N)):((0,l.wg)(),(0,l.iD)("input",P))])],32)]))])],64)}var Y=r(2492),A=r.n(Y),G=r(8379),K=r(4870),Q=r(2483),S={setup(){const t=(0,Q.tv)(),e=(0,l.f3)("axios"),r=(0,K.iH)("xyz"),n=(0,K.iH)(""),a=(0,K.iH)({user:{}}),s=(0,K.iH)(!1),c=()=>{if(""!==n.value.trim()){s.value=!0;const t=`https://vue3-course-api.hexschool.io/api/chienyu-api/order/${n.value}`;e.get(t).then((t=>{null!==t.data.order?(a.value=t.data.order,r.value=t.data.order.id):r.value="error",s.value=!1})).catch((()=>{s.value=!1,A().fire({title:"似乎有些問題 請稍後再嘗試",icon:"error",showConfirmButton:!1,timer:2e3})}))}else r.value="error"},o=()=>{const r=`https://vue3-course-api.hexschool.io/api/chienyu-api/pay/${n.value}`;e.post(r).then((()=>{t.push(`/pay_completed/${n.value}`)})).catch((()=>{A().fire({title:"似乎有些問題 請稍後再嘗試",icon:"error",showConfirmButton:!1,timer:2e3})}))};return{tempOrderId:r,orderId:n,order:a,isLoading:s,searchOrder:c,checkout:o,currency:G.Z}}},V=r(89);const W=(0,V.Z)(S,[["render",U],["__scopeId","data-v-3a390c59"]]);var X=W}}]);
//# sourceMappingURL=259.76f7a757.js.map