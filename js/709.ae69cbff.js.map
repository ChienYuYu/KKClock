{"version":3,"file":"js/709.ae69cbff.js","mappings":"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","sources":["webpack://kkclock/./src/methods/currency.js","webpack://kkclock/../src/index.ts","webpack://kkclock/./src/methods/emitter.js","webpack://kkclock/./src/components/front/ProgressBar.vue","webpack://kkclock/./src/components/front/ProgressBar.vue?9b33","webpack://kkclock/./src/views/front/KKClockCart.vue","webpack://kkclock/./src/views/front/KKClockCart.vue?5077"],"sourcesContent":["export default function currency(num) {\n  const n = parseInt(num, 10);\n  return `${n.toFixed(0).replace(/./g, (c, i, a) => (i && c !== '.' && ((a.length - i) % 3 === 0) ? `, ${c}`.replace(/\\s/g, '') : c))}`;\n}\n","export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = unknown> = (event: T) => void;\nexport type WildcardHandler<T = Record<string, unknown>> = (\n\ttype: keyof T,\n\tevent: T[keyof T]\n) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList<T = unknown> = Array<Handler<T>>;\nexport type WildCardEventHandlerList<T = Record<string, unknown>> = Array<WildcardHandler<T>>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap<Events extends Record<EventType, unknown>> = Map<\n\tkeyof Events | '*',\n\tEventHandlerList<Events[keyof Events]> | WildCardEventHandlerList<Events>\n>;\n\nexport interface Emitter<Events extends Record<EventType, unknown>> {\n\tall: EventHandlerMap<Events>;\n\n\ton<Key extends keyof Events>(type: Key, handler: Handler<Events[Key]>): void;\n\ton(type: '*', handler: WildcardHandler<Events>): void;\n\n\toff<Key extends keyof Events>(type: Key, handler?: Handler<Events[Key]>): void;\n\toff(type: '*', handler: WildcardHandler<Events>): void;\n\n\temit<Key extends keyof Events>(type: Key, event: Events[Key]): void;\n\temit<Key extends keyof Events>(type: undefined extends Events[Key] ? Key : never): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt<Events extends Record<EventType, unknown>>(\n\tall?: EventHandlerMap<Events>\n): Emitter<Events> {\n\ttype GenericEventHandler =\n\t\t| Handler<Events[keyof Events]>\n\t\t| WildcardHandler<Events>;\n\tall = all || new Map();\n\n\treturn {\n\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `'*'` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<Key extends keyof Events>(type: Key, handler: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.push(handler);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tall!.set(type, [handler] as EventHandlerList<Events[keyof Events]>);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * If `handler` is omitted, all handlers of the given type are removed.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from, or `'*'`\n\t\t * @param {Function} [handler] Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<Key extends keyof Events>(type: Key, handler?: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\tif (handler) {\n\t\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tall!.set(type, []);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `'*'` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing '*' handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<Key extends keyof Events>(type: Key, evt?: Events[Key]) {\n\t\t\tlet handlers = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as EventHandlerList<Events[keyof Events]>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(evt!);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\thandlers = all!.get('*');\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as WildCardEventHandlerList<Events>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(type, evt!);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n}\n","import mitt from 'mitt';\n\nconst emitter = mitt();\n\nexport default emitter;\n","<template>\n  <div class=\"mt-5 pt-5 container d-flex justify-content-center\">\n    <ul class=\"step-list list-unstyled rounded-3 overflow-hidden\">\n      <li :class=\"{ 'step-active': stepStatus === 1 }\">STEP1<br />確認訂單</li>\n      <li :class=\"{ 'step-active': stepStatus === 2 }\">STEP2<br />填寫資料</li>\n      <li :class=\"{ 'step-active': stepStatus === 3 }\">STEP3<br />確認付款</li>\n    </ul>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      stepStatus: 0,\n    };\n  },\n  created() {\n    if (this.$route.path === '/cart') {\n      this.stepStatus = 1;\n    }\n    if (this.$route.path === '/buyer_info') {\n      this.stepStatus = 2;\n    }\n    if (this.$route.path === `/checkout/${this.$route.params.orderId}`) {\n      this.stepStatus = 3;\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.step-list {\n  border: 1px solid #777;\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  li {\n    padding: 0 5rem;\n    @media (max-width: 767.98px) {\n      padding: 0 1.4rem;\n    }\n  }\n  li + li {\n    border-left: 1px solid #777;\n  }\n}\n.step-active {\n  background: #777;\n  color: #fff;\n}\n</style>\n","import { render } from \"./ProgressBar.vue?vue&type=template&id=29ff2731\"\nimport script from \"./ProgressBar.vue?vue&type=script&lang=js\"\nexport * from \"./ProgressBar.vue?vue&type=script&lang=js\"\n\nimport \"./ProgressBar.vue?vue&type=style&index=0&id=29ff2731&lang=scss\"\n\nimport exportComponent from \"S:\\\\myProject\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <LoadingPlugin :active=\"isLoading\" />\n  <ProgressBar />\n  <div class=\"container mt-5\">\n    <div class=\"col-12 col-md-10 mx-auto\">\n      <table class=\"table align-middle\">\n        <thead>\n          <tr>\n            <th scope=\"col\">品名</th>\n            <th scope=\"col\">數量</th>\n            <th scope=\"col\">合計</th>\n            <th scope=\"col\" />\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in carts\" :key=\"item.id\">\n            <td class=\" text-nowrap small-font ps-1 pe-0\">{{ item.product.title }}</td>\n            <td>\n              <div class=\"d-flex col-12 col-md-6 col-lg-3\">\n                <button\n                  class=\"btn btn-sm btn-secondary rounded-0\"\n                  type=\"button\"\n                  @click=\"updateCart(item.id, item.qty + 1)\"\n                >\n                  <i class=\"bi bi-plus\" />\n                </button>\n                <input\n                  type=\"number\"\n                  class=\"form-control rounded-0 px-1 text-center bg-white\"\n                  min=\"1\"\n                  id=\"qty\"\n                  v-model=\"item.qty\"\n                  aria-label=\"qty\"\n                  disabled\n                />\n                <button\n                  class=\"btn btn-sm btn-secondary rounded-0\"\n                  type=\"button\"\n                  @click=\"updateCart(item.id, item.qty - 1)\"\n                  :disabled=\"item.qty === 1\"\n                >\n                  <i class=\"bi bi-dash\" />\n                </button>\n              </div>\n            </td>\n            <td class=\"small-font\">${{ currency(item.total) }}</td>\n            <td>\n              <button type=\"button\" class=\"btn btn-danger btn\" @click=\"deleteCart(item.id)\">\n                <i class=\"bi bi-trash\" />\n              </button>\n            </td>\n          </tr>\n          <tr>\n            <td class=\"border-0\" />\n          </tr>\n          <tr>\n            <td colspan=\"4\">\n              <div class=\"col-md-8 col-lg-4\">\n                <div class=\"input-group mb-3\">\n                  <button\n                    class=\"btn btn-outline-secondary\"\n                    type=\"button\"\n                    @click=\"useCouponCode\"\n                    :disabled=\"discount > 0\"\n                  >\n                    套用優惠碼\n                  </button>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入優惠碼\"\n                    aria-label=\"coupon\"\n                    aria-describedby=\"button-coupon\"\n                    v-model=\"couponCode\"\n                  />\n                </div>\n                <p class=\"text-myorange text-center\" v-if=\"couponStatus === true\">\n                  優惠碼套用成功!\n                </p>\n                <p class=\"text-myred text-center\" v-else-if=\"couponStatus === false\">\n                  優惠碼無效 請重新輸入!\n                </p>\n              </div>\n            </td>\n          </tr>\n          <tr>\n            <td colspan=\"4\">\n              <p class=\"text-mygreen text-end px-5\">合計 ${{ currency(totalPrice) }}</p>\n              <p class=\"text-myorange text-end px-5\">\n                優惠券折扣 ${{ currency(Math.round(discount)) }}\n              </p>\n              <p class=\"text-myred text-end px-5\">總計 ${{ currency(Math.round(finalPrice)) }}</p>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"d-flex justify-content-center p-5\">\n        <button type=\"button\" class=\"btn btn-danger\"\n        @click=\"$router.push('/buyer_info')\">\n          下一步\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, inject, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport emitter from '@/methods/emitter';\nimport currency from '@/methods/currency';\nimport Swal from 'sweetalert2';\nimport ProgressBar from '@/components/front/ProgressBar.vue';\n\nexport default {\n  components: {\n    ProgressBar,\n  },\n  setup() {\n    const axios = inject('axios');\n    const router = useRouter();\n    const carts = ref([]);\n    const totalPrice = ref(0);\n    const finalPrice = ref(0);\n    const discount = ref(0);\n    const couponCode = ref('');\n    const couponStatus = ref('');\n    const isLoading = ref(false);\n\n    const getCarts = () => {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      isLoading.value = true;\n      axios.get(api)\n        .then((res) => {\n          carts.value = res.data.data.carts;\n          totalPrice.value = res.data.data.total;\n          finalPrice.value = res.data.data.final_total;\n          discount.value = totalPrice.value - finalPrice.value;\n          isLoading.value = false;\n        })\n        .catch(() => {\n          isLoading.value = false;\n          Swal.fire({\n            title: '似乎有些問題 請稍後再來訪',\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 2000,\n          });\n          router.push('/');\n        });\n    };\n\n    getCarts(); // created\n    onMounted(() => {\n      emitter.on('updateData', () => {\n        getCarts();\n      });\n    });\n\n    const updateCart = (id, num) => {\n      const cart = { data: { product_id: id, qty: num } };\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      axios.put(api, cart)\n        .then(() => {\n          getCarts();\n        })\n        .catch(() => {\n          isLoading.value = false;\n          Swal.fire({\n            title: '似乎有些問題 請稍後再嘗試',\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 2000,\n          });\n        });\n    };\n\n    const deleteCart = (id) => {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      axios.delete(api)\n        .then(() => {\n          getCarts();\n          emitter.emit('updateData');\n        })\n        .catch(() => {\n          Swal.fire({\n            title: '似乎有些問題 請稍後再嘗試',\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 2000,\n          });\n        });\n    };\n\n    const useCouponCode = () => {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      axios.post(api, { data: { code: couponCode.value } })\n        .then((res) => {\n          getCarts();\n          if (res.data.success) {\n            couponStatus.value = true;\n          } else {\n            couponStatus.value = false;\n          }\n        })\n        .catch(() => {\n          Swal.fire({\n            title: '似乎有些問題 請稍後再嘗試',\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 2000,\n          });\n        });\n    };\n\n    return {\n      currency,\n      carts,\n      totalPrice,\n      finalPrice,\n      discount,\n      couponCode,\n      couponStatus,\n      isLoading,\n      getCarts,\n      updateCart,\n      deleteCart,\n      useCouponCode,\n    };\n  },\n};\n</script>\n\n<style scoped>\n@media (max-width: 575.98px) {\n  .small-font {\n    font-size: 14px;\n  }\n}\n</style>\n","import { render } from \"./KKClockCart.vue?vue&type=template&id=3d099852&scoped=true\"\nimport script from \"./KKClockCart.vue?vue&type=script&lang=js\"\nexport * from \"./KKClockCart.vue?vue&type=script&lang=js\"\n\nimport \"./KKClockCart.vue?vue&type=style&index=0&id=3d099852&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\myProject\\\\kkclock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d099852\"]])\n\nexport default __exports__"],"names":["currency","num","n","parseInt","toFixed","replace","c","i","a","length","all","Map","on","type","handler","handlers","get","push","set","off","splice","indexOf","emit","evt","slice","map","emitter","mitt","class","_createElementVNode","_hoisted_4","_hoisted_8","_hoisted_12","_createElementBlock","$data","data","stepStatus","created","this","$route","path","params","orderId","__exports__","render","scope","_hoisted_16","colspan","_createVNode","_component_LoadingPlugin","active","$setup","_component_ProgressBar","_Fragment","_renderList","item","key","id","_toDisplayString","product","title","onClick","qty","min","$event","disabled","total","_hoisted_18","_hoisted_22","placeholder","Math","round","_ctx","components","ProgressBar","setup","axios","inject","router","useRouter","carts","ref","totalPrice","finalPrice","discount","couponCode","couponStatus","isLoading","getCarts","api","value","then","res","final_total","catch","Swal","icon","showConfirmButton","timer","onMounted","updateCart","cart","product_id","put","deleteCart","delete","useCouponCode","post","code","success"],"sourceRoot":""}